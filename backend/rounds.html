
<!DOCTYPE html>
<html lang="sv-SE">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Min Golf</title>

<link rel="apple-touch-icon" sizes="180x180" href="/files/favicons/apple-touch-icon.png?v=2">
<link rel="icon" type="image/png" sizes="32x32" href="/files/favicons/favicon-32x32.png?v=2">
<link rel="icon" type="image/png" sizes="16x16" href="/files/favicons/favicon-16x16.png?v=2">
<link rel="manifest" href="/files/favicons/site.webmanifest?v=2">
<link rel="mask-icon" href="/files/favicons/safari-pinned-tab.svg?v=2" color="#004987">
<link rel="shortcut icon" href="/files/favicons/favicon.ico?v=2">
<meta name="apple-mobile-web-app-title" content="MinGolf">
<meta name="application-name" content="MinGolf">
<meta name="msapplication-TileColor" content="#ffffff">
<meta name="msapplication-config" content="/files/favicons/browserconfig.xml?v=2">
<meta name="theme-color" content="#ffffff">
    
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/css/bootstrap.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.7.0/animate.min.css">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/flatpickr/4.5.2/flatpickr.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/flatpickr/4.5.2/themes/light.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/flatpickr/4.5.2/plugins/confirmDate/confirmDate.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/4.4.6/css/swiper.min.css">
<link rel="stylesheet" href="/files/assets/bootstrap-select-1.13.12/css/bootstrap-select.min.css">
<link rel="stylesheet" href="/files/assets/formvalidation/css/formValidation.min.css?v=1.3.0">

<link rel="stylesheet" href="/files/css/site.min.css?v=Uq2qF7Mk_IVmPKQphwFfUBcIGBEbQGXjHXRW0jrfHaY">


    <script src="https://securepubads.g.doubleclick.net/tag/js/gpt.js"></script>
<script>
    window.googletag = window.googletag || { cmd: [] };

    googletag.cmd.push(function () {
        googletag.pubads().enableLazyLoad({
            fetchMarginPercent: 100,  // Fetch slots within 1 viewport.
            renderMarginPercent: 20,  // Render slots within 1 viewports.
            mobileScaling: 2.0  // Double the above values on mobile.
        });

        googletag.pubads().enableSingleRequest();
        googletag.pubads().collapseEmptyDivs(true);

        googletag.pubads().setTargeting('gen', ['man']);
        googletag.pubads().setTargeting('age', ['38']);
        googletag.pubads().setTargeting('hcp', ['5']);

        googletag.enableServices();
    });
</script></head>
<body>
    <script type="text/javascript" id="dummy-script"></script>

    
<main>

<div id="header" class="header header-sticky-top header-sticky-absolute header-show-hide" data-header-fix-moment="fit">
    <div class="header-section">
        <div class="advertising-wrapper header-ads">
            <div class="advertising-content" data-textads="Annons">
                <div id="div-gpt-ad-uniq-mg-mobil1"></div>
<div id="div-gpt-ad-uniq-mg-panorama1"></div>
<script>
    googletag.cmd.push(function () {
        var urlArray = window.location.pathname.split('/');
        urlArray = urlArray.filter(Boolean);

        for (index = 0; index < urlArray.length; index++) {
            urlArray[index] = urlArray[index].substring(0, 40);
        }

        var mappingMobile = googletag.sizeMapping()
            .addSize([0, 0], [320, 85])
            .addSize([992, 250], [])
            .build();

        googletag.defineSlot('/21757688035/mg', [[320, 85]], 'div-gpt-ad-uniq-mg-mobil1').defineSizeMapping(mappingMobile).setTargeting('url', urlArray).setTargeting('pos', ['mobil1']).addService(googletag.pubads()).setCollapseEmptyDiv(true);

        googletag.display('div-gpt-ad-uniq-mg-mobil1');

        var mappingDesktop = googletag.sizeMapping()
            .addSize([0, 0], [])
            .addSize([992, 250], [980, 240])
            .build();

        googletag.defineSlot('/21757688035/mg', [[980, 240]], 'div-gpt-ad-uniq-mg-panorama1').defineSizeMapping(mappingDesktop).setTargeting('url', urlArray).setTargeting('pos', ['panorama1']).addService(googletag.pubads()).setCollapseEmptyDiv(true);

        googletag.display('div-gpt-ad-uniq-mg-panorama1');
    });
</script> 
            </div>
        </div>

        <div class="container">
            <div class="header-bar" data-authenticated="1">
                <a href="/">
                    <img src="/files/img/Logo/logo_MG.svg" alt="" />
                </a>

                    <a href="javascript:void(0)" onclick="mg.logout();" data-timeout="0">
                        <i class="icon icon-avatar"></i>
                        <span>Logga ut</span>
                    </a>

                <a href="javascript:void(0)" onclick="mg.ui.navigation.toggle();" data-menu>
                    <b><i></i></b>
                    <span>Meny</span>
                </a>
            </div>
        </div>
    </div>
</div>



    <div class="content">


        <div class="content-inner">
            


<div class="container">
    
<div class="site-hcp-2">
    <div class="hcp-header-block-2">
        <h1>Handicap</h1>
        <span class="help-wrapper" onclick="mg.pages.hcp2.showHelpModal();">
            <span>Hj&#xE4;lp</span>
            <i class="icon icon-questionmark"></i>
        </span>
    </div>

    <div class="hcp-bar-block-2">
        <div class="hcp-bar-item-2">
            <div class="hcp-title">Exakt handicap</div>
            <div class="hcp-value">
                <div class="hcp-value-inner">4,8</div>

            </div>
        </div>
        <div class="hcp-bar-item-2">
            <button class="btn btn-secondary"  onclick="mg.pages.hcp2.actions.registerRound();">Registrera Rond</button>
        </div>
        <div class="hcp-bar-item-2">
            <button class="btn btn-secondary" onclick="mg.pages.hcp2.openHcpCert();">Handicapbevis</button>
        </div>
    </div>

    <div class="warning-block d-none">
        <i class="icon icon-info"></i>
        <span></span>
    </div>

    <div id="hcp-tabs" class="mg-tab-wrapper"><nav class="nav nav-tabs nav-justified" id="hcp-tabs-tabs" role="tablist"><a aria-controls="tab-92861990e0eefc9da9518a6399d5edbd46eeed8834126" aria-selected="true" class="nav-item nav-link active" data-identifier="rounds" data-toggle="tab" href="#tab-92861990e0eefc9da9518a6399d5edbd46eeed8834126" id="tab-92861990e0eefc9da9518a6399d5edbd46eeed8834126-tab" role="tab">Ronder</a></nav><div class="tab-content" id="hcp-tabs-content"><div aria-labelledby="tab-92861990e0eefc9da9518a6399d5edbd46eeed8834126-tab" class="tab-pane active" id="tab-92861990e0eefc9da9518a6399d5edbd46eeed8834126" role="tabpanel">
            <div class="hcp-tab hcp-tab-rounds">
                <div class="help-wrapper" onclick="mg.pages.hcp2.rounds.showHelpModal();">
                    <span>Hj&#xE4;lp</span>
                    <i class="icon icon-questionmark"></i>
                </div>
                <div class="hcp-rounds-filter">
                    <div class="custom-control custom-switch" data-textleft="1"><input class="custom-control-input" id="chkShowOnlyCountingRounds" onchange="mg.pages.hcp2.rounds.toggleShowOnlyCountingRounds(this);" type="checkbox"><label class="custom-control-label" for="chkShowOnlyCountingRounds">Visa endast 8 b&#xE4;sta</label></div>
                </div>
                <div class="hcp-rounds-result">
                    <div id="hcp-rounds-list" class="hcp-rounds-list"></div>
                    <div class="show-more-wrapper">
                        <div onclick="mg.pages.hcp2.rounds.showMore();" class="btn-show-more"><div class="show-more-text">Visa fler</div><div class="show-more-icon"><i class="icon icon-plus"></i></div></div>
                        <div class="spinner-holder">
                            <div class="spinner spinner-blue"></div>
                        </div>
                    </div>
                    <div class="hcp-rounds-result-footer">
                        <div class="bold">Vilka ronder visas?</div>
                        <div>Här visas enbart ronder som har varit med och påverkat handicap. Här visas inte ronder registrerade före 1 januari 2017 eller ronder registrerade utomlands före 1 mars 2020. Årsjusteringar eller systemjusteringar syns inte heller. Dessa ronder påverkar inte ditt världshandicap så du hittar dessa ronder istället i <a href="/Site/Calendar">Min golfkalender</a></div>
                    </div>
                </div>
                <div class="hcp-rounds-spinner">
                    <div class="spinner spinner-blue"></div>
                    <div>H&#xE4;mtar, v&#xE4;nligen v&#xE4;nta</div>
                </div>
            </div>
        </div></div></div>

    <div class="advertising-wrapper hcp-ads"> 
        <div class="advertising-content" data-textads="Annons">
            <script type="text/javascript">
(function() {
  var mid = window.matchMedia && window.matchMedia('(min-width: 992px)').matches ? '651961' : '652115';
  if (!mid) return;
  document.write('<scr' + 'ipt data-adfscript="adx.adform.net/adx/?mid=' + mid + '&rnd=447"><\/scr' + 'ipt>');
})();
</script>
        </div>
    </div>

    <div class="hcp-links">
        <div class="ads-wrapper bg-blue"> 
            <div class="row">
                <div class="col-lg-4">
                    <a href="javascript:void(0)" class="ad-box bg-1" data-page="hcprules">
                        <div class="ad-box-content">
                            <h3>HCP-regler</h3>
                        </div>
                    </a>
                </div>
                <div class="col-lg-4">
                    <a href="javascript:void(0)" class="ad-box bg-2" data-page="whsinfo">
                        <div class="ad-box-content">
                            <h3>Världs&shy;handicap&shy;systemet (WHS)</h3>
                        </div>
                    </a>
                </div>
            </div>
        </div>
    </div>

    <div id="mg-hcp-help-modal" class="hcp-help-modal modal fade hide state action modal-body-full" aria-hidden="true" data-dismiss-on-overlay-click="true" role="dialog" tabindex="-1"><div class="modal-dialog" role="document"><div class="modal-content"><div class="modal-header"><div class="modal-title">DIN HANDICAP</div><button aria-label="Close" class="close" data-dismiss="modal" type="button"><span>St&#xE4;ng</span><i class="icon icon-close"></i></button></div><div class="modal-body"><div class="modal-body-title"><span></span></div><div class="help-intro">
            <p>Under "Handicap" kan du se din exakta handicap, registrera ny rond och ladda ner ett handicapbevis. Du kan också följa din handicaputveckling och se dina ronder.</p>

            <p>Vill du veta mer om världshandicapet kan du läsa mer här</p>
            <p>Läs mer: <a href="https://golf.se/handicap" target="_blank">golf.se/handicap</a>
        </div>


        <div id="expandable-92861990e0eefc9da9518a6399d5edbd46eeed8848051" class="expandable"><a aria-controls="expandable-92861990e0eefc9da9518a6399d5edbd46eeed8848051-collapse" aria-expanded="false" data-toggle="collapse" href="#expandable-92861990e0eefc9da9518a6399d5edbd46eeed8848051-collapse">Se dina ronder<i aria-hidden="true" class="icon icon-arrow-down"></i></a><div class="collapse" id="expandable-92861990e0eefc9da9518a6399d5edbd46eeed8848051-collapse"><div class="collapse-content">
            <p>Under "Ronder" ser du dina registrerade ronder. Överst visas dina 20 senaste ronder. De lägsta handicapresultaten, som din exakta handicap baseras på, är markerade med grön färg.</p>
            <p>Om du har fler än 20 registrerade ronder visas de nedanför.</p>
            <p>Om du har färre än 20 registrerade ronder används en beräkningstabell för 1–19 ronder.</p>
        </div></div></div>

        <div id="expandable-92861990e0eefc9da9518a6399d5edbd46eeed8849864" class="expandable"><a aria-controls="expandable-92861990e0eefc9da9518a6399d5edbd46eeed8849864-collapse" aria-expanded="false" data-toggle="collapse" href="#expandable-92861990e0eefc9da9518a6399d5edbd46eeed8849864-collapse">Registrera rond<i aria-hidden="true" class="icon icon-arrow-down"></i></a><div class="collapse" id="expandable-92861990e0eefc9da9518a6399d5edbd46eeed8849864-collapse"><div class="collapse-content">
            <p>Här kan du registrera dina ronder, antingen bokade ronder som finns i Min Golf, ronder du inte bokat i förväg eller ronder du har spelat utomlands.</p>
            <p>Du kan registrera dina ronder på två olika sätt. Antingen med slag, bruttoscore hål för hål eller poäng, din totalpoäng i poängbogey.</p>
            <p>Om du ska registrera fler ronder behöver du registrera den äldsta ronden först. Min Golf kommer att föreslå ronder som finns i systemet. Om du behöver ange ett specifikt datum väljer du "Registrera ny rond".</p>
        </div></div></div></div></div></div></div>

    <div id="mg-hcp-rounds-help-modal" class="hcp-help-modal modal fade hide state action modal-body-full" aria-hidden="true" data-dismiss-on-overlay-click="true" role="dialog" tabindex="-1"><div class="modal-dialog" role="document"><div class="modal-content"><div class="modal-header"><div class="modal-title">RONDER</div><button aria-label="Close" class="close" data-dismiss="modal" type="button"><span>St&#xE4;ng</span><i class="icon icon-close"></i></button></div><div class="modal-body"><div class="modal-body-title"><span></span></div><div class="help-intro">
            <b>Information om en rond</b>
            <p>Du kan se följande information om varje rond. Klicka på ronden för att visa all information.</p>
        </div>

        <div id="expandable-92861990e0eefc9da9518a6399d5edbd46eeed8855710" class="expandable"><a aria-controls="expandable-92861990e0eefc9da9518a6399d5edbd46eeed8855710-collapse" aria-expanded="false" data-toggle="collapse" href="#expandable-92861990e0eefc9da9518a6399d5edbd46eeed8855710-collapse">Datum<i aria-hidden="true" class="icon icon-arrow-down"></i></a><div class="collapse" id="expandable-92861990e0eefc9da9518a6399d5edbd46eeed8855710-collapse"><div class="collapse-content">
            <p>Datum och tid när ronden spelades.</p>
        </div></div></div>

        <div id="expandable-92861990e0eefc9da9518a6399d5edbd46eeed8857194" class="expandable"><a aria-controls="expandable-92861990e0eefc9da9518a6399d5edbd46eeed8857194-collapse" aria-expanded="false" data-toggle="collapse" href="#expandable-92861990e0eefc9da9518a6399d5edbd46eeed8857194-collapse">Klubb<i aria-hidden="true" class="icon icon-arrow-down"></i></a><div class="collapse" id="expandable-92861990e0eefc9da9518a6399d5edbd46eeed8857194-collapse"><div class="collapse-content">
            <p>Vilken golfklubb ronden spelades på och vilken bana.</p>
        </div></div></div>

        <div id="expandable-92861990e0eefc9da9518a6399d5edbd46eeed8858696" class="expandable"><a aria-controls="expandable-92861990e0eefc9da9518a6399d5edbd46eeed8858696-collapse" aria-expanded="false" data-toggle="collapse" href="#expandable-92861990e0eefc9da9518a6399d5edbd46eeed8858696-collapse">Typ<i aria-hidden="true" class="icon icon-arrow-down"></i></a><div class="collapse" id="expandable-92861990e0eefc9da9518a6399d5edbd46eeed8858696-collapse"><div class="collapse-content">
            <p>Vilken typ av rond som registrerats. Sällskapsrond, tävlingsrond eller rond genererad av systemet.</p>
        </div></div></div>

        <div id="expandable-92861990e0eefc9da9518a6399d5edbd46eeed8860245" class="expandable"><a aria-controls="expandable-92861990e0eefc9da9518a6399d5edbd46eeed8860245-collapse" aria-expanded="false" data-toggle="collapse" href="#expandable-92861990e0eefc9da9518a6399d5edbd46eeed8860245-collapse">Hål<i aria-hidden="true" class="icon icon-arrow-down"></i></a><div class="collapse" id="expandable-92861990e0eefc9da9518a6399d5edbd46eeed8860245-collapse"><div class="collapse-content">
            <p>Hur många hål du spelade den ronden.</p>
        </div></div></div>

        <div id="expandable-92861990e0eefc9da9518a6399d5edbd46eeed8861731" class="expandable"><a aria-controls="expandable-92861990e0eefc9da9518a6399d5edbd46eeed8861731-collapse" aria-expanded="false" data-toggle="collapse" href="#expandable-92861990e0eefc9da9518a6399d5edbd46eeed8861731-collapse">Poäng<i aria-hidden="true" class="icon icon-arrow-down"></i></a><div class="collapse" id="expandable-92861990e0eefc9da9518a6399d5edbd46eeed8861731-collapse"><div class="collapse-content">
            <p>Poäng räknat för hålen du spelat. Om du spelat färre än 18 hål skriver du poängen för de hål du spelat så räknar systemet upp till Totalpoäng över 18 hål.</p>

            <p>Läs mer</p>
            <a href="https://golf.se/for-spelaren/spela-golf/spel--och-tavlingsformer/#faq-poangbogey" target="_blank">https://golf.se/for-spelaren/spela-golf/spel--och-tavlingsformer/#faq-poangbogey"</a>
        </div></div></div>

        <div id="expandable-92861990e0eefc9da9518a6399d5edbd46eeed8863574" class="expandable"><a aria-controls="expandable-92861990e0eefc9da9518a6399d5edbd46eeed8863574-collapse" aria-expanded="false" data-toggle="collapse" href="#expandable-92861990e0eefc9da9518a6399d5edbd46eeed8863574-collapse">Just. brutto<i aria-hidden="true" class="icon icon-arrow-down"></i></a><div class="collapse" id="expandable-92861990e0eefc9da9518a6399d5edbd46eeed8863574-collapse"><div class="collapse-content">
            <p>Totaljusterad bruttoscore. Din bruttoscore över 18-hål men med max nettodubbelbogey på varje hål.</p>
        </div></div></div>

        <div id="expandable-92861990e0eefc9da9518a6399d5edbd46eeed8865122" class="expandable"><a aria-controls="expandable-92861990e0eefc9da9518a6399d5edbd46eeed8865122-collapse" aria-expanded="false" data-toggle="collapse" href="#expandable-92861990e0eefc9da9518a6399d5edbd46eeed8865122-collapse">Hcp-resultat<i aria-hidden="true" class="icon icon-arrow-down"></i></a><div class="collapse" id="expandable-92861990e0eefc9da9518a6399d5edbd46eeed8865122-collapse"><div class="collapse-content">
            <p>Det resultat du uppnått på en given bana på en given dag på en given rond. Det handicap du spelat mot på den ronden.</p>
            <p>Om du har eventuella justeringar på ditt handicap kommer det att ge ett Justerat handicapresultat.</p>
        </div></div></div>

        <div id="expandable-92861990e0eefc9da9518a6399d5edbd46eeed8866805" class="expandable"><a aria-controls="expandable-92861990e0eefc9da9518a6399d5edbd46eeed8866805-collapse" aria-expanded="false" data-toggle="collapse" href="#expandable-92861990e0eefc9da9518a6399d5edbd46eeed8866805-collapse">Markör<i aria-hidden="true" class="icon icon-arrow-down"></i></a><div class="collapse" id="expandable-92861990e0eefc9da9518a6399d5edbd46eeed8866805-collapse"><div class="collapse-content">
            <p>Vem som agerade din markör för ronden.</p>
        </div></div></div>

        <div id="expandable-92861990e0eefc9da9518a6399d5edbd46eeed8868293" class="expandable"><a aria-controls="expandable-92861990e0eefc9da9518a6399d5edbd46eeed8868293-collapse" aria-expanded="false" data-toggle="collapse" href="#expandable-92861990e0eefc9da9518a6399d5edbd46eeed8868293-collapse">PCC<i aria-hidden="true" class="icon icon-arrow-down"></i></a><div class="collapse" id="expandable-92861990e0eefc9da9518a6399d5edbd46eeed8868293-collapse"><div class="collapse-content">
            <p>PCC-beräkning (Playing Conditions Calculation). En justering för om spelförhållanden avvikit från det normala.</p>
        </div></div></div>

        <div id="expandable-92861990e0eefc9da9518a6399d5edbd46eeed8869854" class="expandable"><a aria-controls="expandable-92861990e0eefc9da9518a6399d5edbd46eeed8869854-collapse" aria-expanded="false" data-toggle="collapse" href="#expandable-92861990e0eefc9da9518a6399d5edbd46eeed8869854-collapse">Justering<i aria-hidden="true" class="icon icon-arrow-down"></i></a><div class="collapse" id="expandable-92861990e0eefc9da9518a6399d5edbd46eeed8869854-collapse"><div class="collapse-content">
            <p>Justering av handicapresultatet. Visas om handicapresultatet justerats på grund av en extraordinär score eller av en handicapkommitté. Klicka på justering för att se mer information om varför justeringen skett.</p>
        </div></div></div>

        <div id="expandable-92861990e0eefc9da9518a6399d5edbd46eeed8871515" class="expandable"><a aria-controls="expandable-92861990e0eefc9da9518a6399d5edbd46eeed8871515-collapse" aria-expanded="false" data-toggle="collapse" href="#expandable-92861990e0eefc9da9518a6399d5edbd46eeed8871515-collapse">Scorekort<i aria-hidden="true" class="icon icon-arrow-down"></i></a><div class="collapse" id="expandable-92861990e0eefc9da9518a6399d5edbd46eeed8871515-collapse"><div class="collapse-content">
            <p>Klicka för att se scorekortet för ronden. Visas enbart om du registrerat ronden med bruttoscore hål för hål.</p>
        </div></div></div>

        <div id="expandable-92861990e0eefc9da9518a6399d5edbd46eeed8873074" class="expandable"><a aria-controls="expandable-92861990e0eefc9da9518a6399d5edbd46eeed8873074-collapse" aria-expanded="false" data-toggle="collapse" href="#expandable-92861990e0eefc9da9518a6399d5edbd46eeed8873074-collapse">Vilka ronder visas?<i aria-hidden="true" class="icon icon-arrow-down"></i></a><div class="collapse" id="expandable-92861990e0eefc9da9518a6399d5edbd46eeed8873074-collapse"><div class="collapse-content">
            <p>Här visas enbart ronder som har varit med och påverkat handicap. Här visas inte ronder registrerade före 1 januari 2017 eller ronder registrerade utomlands före 1 mars 2020. Årsjusteringar eller systemjusteringar syns inte heller. Dessa ronder påverkar inte ditt världshandicap så du hittar dessa ronder istället i <a href="/Site/Calendar">Min golfkalender</a></p>
        </div></div></div></div></div></div></div>



    <div class="modal fade state action" id="hcpCertModal" tabindex="-1" role="dialog" aria-labelledby="hcpCertModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <div class="modal-title">Mitt HCP bevis</div>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span>St&#xE4;ng</span>
                        <i class="icon icon-close"></i>
                    </button>
                </div>
                <div class="modal-body pb-4">
                    <div class="spinner-holder">
                        <div class="spinner spinner-white"></div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary btn-outline-white w-auto btn-ok hide" onclick="mg.pages.hcp2.printHcpCert()">Skriv ut</button>
                    <button type="button" class="btn btn-primary btn-outline-white w-auto btn-cancel" data-dismiss="modal">Avbryt</button>
                </div>
            </div>
        </div>
    </div>
</div>

</div>

        </div>


        
<div class="footer">
    <div class="container">
        <div class="footer-inner">
            <div class="row">
                <div class="col col-12 col-lg-4">
                    <img src="/files/img/sgf-logo.svg" />
                    <div>
                        <a href="https://www9.golf.se/About/About.aspx" target="_blank">Om Min Golf</a>
                    </div>
                </div>
                <div class="col col-12 col-lg-4">
                    <div class="footer-title">Min Golf</div>
                    <div>En tj&#xE4;nst av Svenska Golff&#xF6;rbundet</div>
                </div>
                <div class="col col-12 col-lg-4">
                    <div class="footer-title other-sites">Andra webbplatser</div>
                    <div>
                        <a href="http://www.golf.se" target="_blank">Golf.se</a>
                    </div>
                    <div>
                        <a href="http://www.svenskgolf.se" target="_blank">SvenskGolf</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
        <div id="modal-hcp-registration-locked" aria-hidden="true" class="modal fade hide state action modal-body-full" data-dismiss-on-overlay-click="true" role="dialog" tabindex="-1"><div class="modal-dialog" role="document"><div class="modal-content"><div class="modal-header"><div class="modal-title">Nu &#xE4;r det n&#xE4;ra!</div><button aria-label="Close" class="close" data-dismiss="modal" type="button"><span>St&#xE4;ng</span><i class="icon icon-close"></i></button></div><div class="modal-body"><div class="modal-body-title"><span></span></div><p>Hej Erik Hammarström.</p>
            <p>Du och resten av Sveriges golfare ska snart få nya handicap. Systemet är i full gång med beräkningarna och kommer vara klar inom ett par dagar. Om du vill registrera en ny rond kan du göra det så fort beräkningarna är klara.</p>

            <b>Ett genomsnitt</b>
            <p>Din exakta handicap räknas ut på genomsnittet av dina bästa ronder. Upp till åtta bästa av de 20 senaste. Under handicap kommer du kunna registrera nya ronder, följa handicapförändringar och se dina tidigare ronder.</p>

            <b>Nyfiken på mer?</b>
            <p>Om du vill du lära dig mer om världshandicapsystemet finns en <a href="https://golfspelochtavling.nu/" target="_blank">digital utbildning här</a>.</p></div></div></div></div>

        <div id="modal-whs-welcome" aria-hidden="true" class="modal fade hide state action modal-body-full" data-dismiss-on-overlay-click="true" role="dialog" tabindex="-1"><div class="modal-dialog" role="document"><div class="modal-content"><div class="modal-header"><div class="modal-title">V&#xE4;lkommen till v&#xE4;rldshandicap</div><button aria-label="Close" class="close" data-dismiss="modal" type="button"><span>St&#xE4;ng</span><i class="icon icon-close"></i></button></div><div class="modal-body"><div class="modal-body-title"><span></span></div><p>Hej Erik Hammarström.</p>
            <p>Nu har Sverige gått över till det nya världshandicapsystemet. Din nya handicap kallas för exakt handicap och är <b>4,8</b>.</p>

            <b>Registrera rond och få ett handicapresultat</b>
            <p>När du registrerar en rond räknas ett handicapresultat ut automatiskt. Handicapresultatet är den handicap du spelade på just den ronden. Nu kan du förutom poängbogeytotal även registrera din bruttoscore hål för hål.</p>

            <b>Ett genomsnitt</b>
            <p>Din exakta handicap räknas ut på genomsnittet av dina lägsta handicapresultat. Upp till de åtta lägsta av de 20 senast registrerade ronderna. Under handicap kan du registrera nya ronder, följa handicapförändringar och se dina tidigare ronder.</p>

            <b>Nyfiken på mer?</b>
            <p>Om du vill du lära dig mer om världshandicapsystemet finns en <a href="https://golfspelochtavling.nu/" target="_blank">digital utbildning här</a>.</p>

            <button class="btn btn-primary mt-4 w-100 w-lg-auto" onclick="mg.ui.minimodalOpener.close(); mg.redirect('/Site/HCP');">Till handicap</button></div></div></div></div>

        <div id="modal-whs-please-log-out" aria-hidden="true" class="modal fade hide state action modal-body-full" data-dismiss-on-overlay-click="true" role="dialog" tabindex="-1"><div class="modal-dialog" role="document"><div class="modal-content"><div class="modal-header"><div class="modal-title">V&#xE4;lkommen till v&#xE4;rldshandicap</div><button aria-label="Close" class="close" data-dismiss="modal" type="button"><span>St&#xE4;ng</span><i class="icon icon-close"></i></button></div><div class="modal-body"><div class="modal-body-title"><span></span></div><p>Hej Erik Hammarström.</p>
            <p>Nu har Sverige gått över till det nya världshandicapsystemet. Du måste logga ut och in igen för att se din nya exakta handicap.</p></div></div></div></div>
    </div>
</main>


<nav id="navigation" class="navigation" role="navigation">
        <ul class="navigation-list logout">
            <li><a href="javascript:void(0)" onclick="mg.logout();">Logga ut</a></li>
        </ul>

    <ul class="navigation-list">
<li><a href="javascript:void(0)" onclick="mg.ui.navigation.itemClick(this, mg.actions.findTeeTime);">Hitta starttid</a></li>
        <li><a href="javascript:void(0)" onclick="mg.ui.navigation.itemClick(this, mg.redirect('/Competition/Search'));">Hitta tävling</a></li>

<li><a href="javascript:void(0)" onclick="mg.ui.navigation.itemClick(this, mg.redirect('/Site/Calendar'));">Min Golfkalender</a></li><li><a href="javascript:void(0)" onclick="mg.ui.navigation.itemClick(this, mg.redirect('/Site/HCP'));">Handicap</a></li><li><a href="javascript:void(0)" onclick="mg.ui.navigation.itemClick(this, mg.redirect('/Site/Settings'));">Mina inställningar</a></li><li><a href="javascript:void(0)" onclick="mg.ui.navigation.itemClick(this, mg.redirect('/Site/OtherServices'));">Övriga tjänster</a></li>

    </ul>

    <ul class="navigation-list external">
        <li><a href="javascript:void(0)" onclick="mg.ui.navigation.itemClick(this, 'window.mg.openTab(\'{oMG}\')');">Gamla Min Golf</a></li>
        <li><a href="javascript:void(0)" onclick="mg.ui.navigation.itemClick(this, 'window.mg.openTab(\'{oMG}/About/About.aspx\', false)');">Om Min Golf</a></li>
        <li><a href="javascript:void(0)" onclick="mg.ui.navigation.itemClick(this, 'window.mg.openTab(\'http://www.golf.se/regler-och-handicap/handicap/\')');">Handicapsystemet</a></li>
        <li><a href="javascript:void(0)" onclick="mg.ui.navigation.itemClick(this, 'window.mg.openTab(\'http://www.golf.se/regler-och-handicap/regler/\')');">Golfregler</a></li>
        <li><a href="javascript:void(0)" onclick="mg.ui.navigation.itemClick(this, 'window.mg.openTab(\'http://www.golf.se/\')');">Golf.se</a></li>
        <li><a href="javascript:void(0)" onclick="mg.ui.navigation.itemClick(this, 'window.mg.openTab(\'http://www.svenskgolf.se/\')');">SvenskGolf.se</a></li>
    </ul>
</nav>



    <div class="templates hide">
        <div class="general">
            <div class="mg-input-wrapper">
                <div class="mg-input"><input class="input-txt" placeholder="" type="text" /><div class="results"></div></div>
            </div>
            <div class="mg-input-search-wrapper">
                <div class="mg-input has-icon-right"><i class="icon icon-search"></i><input class="input-txt" placeholder="Filter" type="text" /><div class="results"></div></div>
            </div>
            <div class="show-more-wrapper">
                <div class="btn-show-more"><div class="show-more-text">Visa fler (1)</div><div class="show-more-icon"><i class="icon icon-plus"></i></div></div> <!-- The parameters specified here should force the parantheses -->
            </div>
            <div class="mg-arrow-wrapper">
                <div class="mg-arrow"><div class="mg-circle"><i class="icon icon-arrow-down"></i></div></div>
            </div>
            <div class="mg-checkbox-wrapper">
                <div class="custom-control custom-checkbox"><input class="custom-control-input" type="checkbox"><label class="custom-control-label"></label></div>
            </div>
            <div class="mg-expandable-wrapper">
                <div id="expandable-8ec481fa2c6f1fc5067248fcec750f1bc783814516271" class="expandable"><a aria-controls="expandable-8ec481fa2c6f1fc5067248fcec750f1bc783814516271-collapse" aria-expanded="false" data-toggle="collapse" href="#expandable-8ec481fa2c6f1fc5067248fcec750f1bc783814516271-collapse"><i aria-hidden="true" class="icon icon-arrow-down"></i></a><div class="collapse" id="expandable-8ec481fa2c6f1fc5067248fcec750f1bc783814516271-collapse"><div class="collapse-content"></div></div></div>
            </div>
            <div class="mg-error-wrapper">
                <div id="errorwrapper-8ec481fa2c6f1fc5067248fcec750f1bc783814517437" class="error-message alert alert-danger d-none" role="alert"><i class="icon icon-info" aria-hidden="true"></i><div class="error-message-main-content"></div></div>
            </div>
            <div class="mg-error-wrapper-dismissible">
                <div id="errorwrapper-8ec481fa2c6f1fc5067248fcec750f1bc783814518624" class="error-message alert alert-danger d-none" role="alert"><i class="icon icon-info" aria-hidden="true"></i><div class="error-message-main-content"></div><a href="javascript:void(mg.resetErrorMessage('#errorwrapper-8ec481fa2c6f1fc5067248fcec750f1bc783814518624'))"><i class="icon icon-close" aria-hidden="true"></i></a></div>
            </div>
            <div class="mg-modal-wrapper">
                <div aria-hidden="true" class="modal fade hide state info" data-dismiss-on-overlay-click="true" id="miniModal1548838032" role="dialog" tabindex="-1"><div class="modal-dialog" role="document"><div class="modal-content"><div class="modal-header"><div class="modal-title"></div><button aria-label="Close" class="close" data-dismiss="modal" type="button"><span>St&#xE4;ng</span><i class="icon icon-close"></i></button></div><div class="modal-body"><div class="spinner-holder"><div class="spinner spinner-yellowbrown"></div></div><div class="modal-body-title"><i class="icon icon-attention"></i><span></span></div></div><div class="modal-footer"><button aria-hidden="true" class="btn btn-primary btn-outline-white btn-ok" data-dismiss="modal" type="button">OK</button><button aria-hidden="true" class="btn btn-primary btn-outline-white btn-cancel" data-dismiss="modal" type="button">Avbryt</button></div></div></div></div>
            </div>
            <div class="mg-switch-wrapper">
                <div class="custom-control custom-switch" id="switch-8ec481fa2c6f1fc5067248fcec750f1bc783814523300-wrapper"><input class="custom-control-input" id="switch-8ec481fa2c6f1fc5067248fcec750f1bc783814523300" type="checkbox"><label class="custom-control-label" for="switch-8ec481fa2c6f1fc5067248fcec750f1bc783814523300"></label></div>
            </div>
        </div>
        <div class="booking"></div>
    </div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/es6-shim/0.35.4/es6-shim.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.15.0/umd/popper.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/js-cookie/2.2.0/js.cookie.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/moment.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/locale/sv.js"></script>
<script type="text/javascript">moment.locale('sv');</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.3/Chart.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/flatpickr/4.5.2/flatpickr.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/flatpickr/4.5.2/l10n/sv.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/flatpickr/4.5.2/plugins/confirmDate/confirmDate.js"></script>
<script type="text/javascript">flatpickr.localize(flatpickr.l10ns.sv); flatpickr.setDefaults({ altInput: true, altFormat: 'j F Y', disableMobile: true, position: 'below' });</script>
<script src="https://s1.adform.net/banners/scripts/adx.js" async defer></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/4.4.6/js/swiper.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/cleave.js/1.4.7/cleave.min.js"></script>
<script src="/files/assets/bootstrap-select-1.13.12/js/bootstrap-select-custom.min.js"></script>
<script src="/files/assets/bootstrap-select-1.13.12/js/i18n/defaults-sv_SE.min.js"></script>
<script src="/files/assets/formvalidation/js/FormValidation.min.js?v=1.3.0"></script>
<script src="/files/assets/formvalidation/js/locales/sv_SE.min.js?v=1.3.0&v2=1"></script>
<script src="/files/assets/formvalidation/js/plugins/Bootstrap.min.js?v=1.3.0"></script>
<script src="/files/assets/formvalidation/js/plugins/StartEndDate.min.js?v=1.3.0"></script>
<script src="/files/assets/formvalidation/js/plugins/Transformer.min.js?v=1.3.0"></script>

<script src="/files/assets/jquery-ui-1.12.1/jquery-ui.min.js"></script>
<script src="/files/js/site.min.js?v=1-rf6-CA6pKY8GY0x8zstnahY-QrG02c5kWF3b7Wckk"></script>
<script src="/handlers/JavaScript/Misc"></script>

<script type="text/javascript">
(function($, window) {
    if (window.mg === undefined)
        window.mg = {};

    var _ = window.mg;

    _.user = {"GolfId":"820615-017","FullName":"Erik Hammarström","HCP":"4,8"};

    _.dateTimeFormat = {"TimeSeparator":"."};

    if (window.moment) {
        var locData = moment.localeData();
        var longDateFormat = {};

        for (var item in locData._longDateFormat) {
          longDateFormat[item] = locData._longDateFormat[item].replace(/:/g, _.dateTimeFormat.TimeSeparator);
        }

        moment.updateLocale(locData._abbr, {
          longDateFormat: longDateFormat
        });
    }
})(jQuery, window);
</script>

<script type="text/javascript">(function(_) { (_.mg === undefined) && (_.mg = {}); _.mg.momentLang = 'sv'; })(window);</script>
<script type="text/javascript">(function(_) { (_.mg === undefined) && (_.mg = {}); _.mg.bootstrapSelectLang = 'sv_SE'; })(window);</script>
<script type="text/javascript">(function(_) { (_.mg === undefined) && (_.mg = {}); _.mg.formValidationLang = 'sv_SE'; })(window);</script>
        <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-36943438-12"></script>
    <script type="text/javascript">
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'UA-36943438-12');
    </script>
    
<script type="text/javascript">
$(function() {
    var o = {"Message":"Vi använder cookies för att förbättra webbplatsupplevelsen. Du kan läsa mer \u003ca href=\u0022https://www9.golf.se/About/About.aspx\u0022 target=\u0022_blank\u0022 tabindex=\u00220\u0022 rel=\u0022noopener noreferrer nofollow\u0022\u003ehär\u003c/a\u003e","GDPR":"Läs mer om \u003ca href=\u0022https://golf.se/personuppgiftspolicy\u0022 target=\u0022_blank\u0022 tabindex=\u00220\u0022\u003eGDPR och personuppgiftshantering inom golfen\u003c/a\u003e","Dismiss":"Ok. Jag förstår"};

    window.cookieconsent.initialise({
        theme  : 'mg',
        layout : 'mg-layout',

        layouts: {
            'mg-layout':
                '<div class="container">' +
                    '<div class="row">' +
                        '<div class="col-md">' +
                            '{{message}}' +
                            '{{gdpr}}' +
                        '</div>' +
                        '<div class="col-md-auto">' +
                            '{{compliance}}' +
                        '</div>' +
                    '</div>' +
                '</div>'
        },

        elements: {
            message : '<div>{{message}}</div>',
            gdpr    : '<div>{{gdpr}}</div>',
            dismiss : '<a href="javascript:void(0)" class="btn btn-block cc-btn cc-dismiss mt-3 mt-md-0" tabindex="0" role="button">{{dismiss}}</a>'
        },

        content: {
            message : o.Message,
            gdpr    : o.GDPR,
            dismiss : o.Dismiss
        }
    });
});
</script>
        <script src="https://cdn.jsdelivr.net/npm/hammerjs@2.0.8"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-zoom@0.7.4"></script>
    <script type="text/javascript">
        (function ($, app, window) {
            var hcpDevelopment = null;
            var hcpRounds = {"Items":[{"RoundNumber":0,"RoundDate":"20200411T142000","HCPResultAdjusted":{"Text":"7,1","Value":7.0732824427480914},"Type":1,"ClubName":"Kristianstads Golfklubb i Åhus","CourseName":"Åhus Östra ","MarkerName":"Andreas Stening","PlayedHoles":18,"PCC":1,"Points":32,"GrossAdjusted":0,"HCPResult":{"Text":"7,1","Value":7.0732824427480914},"Adjustment":null,"Adjustments":null,"IsCounting":false,"IsCalculated":true,"HoleScores":null},{"RoundNumber":0,"RoundDate":"20200411T085500","HCPResultAdjusted":{"Text":"12,1","Value":12.137037037037036},"Type":1,"ClubName":"Kristianstads Golfklubb i Åhus","CourseName":"Åhus Västra","MarkerName":"Fredrik Söderholm","PlayedHoles":18,"PCC":0,"Points":27,"GrossAdjusted":0,"HCPResult":{"Text":"12,1","Value":12.137037037037036},"Adjustment":null,"Adjustments":null,"IsCounting":false,"IsCalculated":true,"HoleScores":null},{"RoundNumber":0,"RoundDate":"20200408T082000","HCPResultAdjusted":{"Text":"12,2","Value":12.175352112676057},"Type":1,"ClubName":"Kalmar Golfklubb","CourseName":"Gamla Banan","MarkerName":"Fredrik Söderholm","PlayedHoles":18,"PCC":0,"Points":26,"GrossAdjusted":0,"HCPResult":{"Text":"12,2","Value":12.175352112676057},"Adjustment":null,"Adjustments":null,"IsCounting":false,"IsCalculated":true,"HoleScores":null},{"RoundNumber":0,"RoundDate":"20200405T100000","HCPResultAdjusted":{"Text":"5,0","Value":5.0133802816901412},"Type":1,"ClubName":"Kalmar Golfklubb","CourseName":"Gamla Banan","MarkerName":"Andreas Stening","PlayedHoles":18,"PCC":0,"Points":36,"GrossAdjusted":0,"HCPResult":{"Text":"5,0","Value":5.0133802816901412},"Adjustment":null,"Adjustments":null,"IsCounting":true,"IsCalculated":true,"HoleScores":null},{"RoundNumber":0,"RoundDate":"20200328T102500","HCPResultAdjusted":{"Text":"3,6","Value":3.5954545454545457},"Type":1,"ClubName":"Kalmar Golfklubb","CourseName":"Nya Banan","MarkerName":"Mikael Johansson","PlayedHoles":18,"PCC":0,"Points":38,"GrossAdjusted":0,"HCPResult":{"Text":"3,6","Value":3.5954545454545457},"Adjustment":null,"Adjustments":null,"IsCounting":true,"IsCalculated":true,"HoleScores":null},{"RoundNumber":0,"RoundDate":"20200322T121700","HCPResultAdjusted":{"Text":"5,7","Value":5.6931297709923667},"Type":1,"ClubName":"Möre Golfklubb","CourseName":"Möre Golfklubb","MarkerName":"Mikael Johansson","PlayedHoles":18,"PCC":0,"Points":36,"GrossAdjusted":0,"HCPResult":{"Text":"5,7","Value":5.6931297709923667},"Adjustment":null,"Adjustments":null,"IsCounting":true,"IsCalculated":true,"HoleScores":null},{"RoundNumber":0,"RoundDate":"20190929T163000","HCPResultAdjusted":{"Text":"9,8","Value":9.7880281690140851},"Type":4,"ClubName":"Kalmar Golfklubb","CourseName":"Gamla Banan","MarkerName":"Andreas Stening","PlayedHoles":18,"PCC":0,"Points":31,"GrossAdjusted":0,"HCPResult":{"Text":"9,8","Value":9.7880281690140851},"Adjustment":null,"Adjustments":null,"IsCounting":false,"IsCalculated":true,"HoleScores":null},{"RoundNumber":0,"RoundDate":"20190922T100500","HCPResultAdjusted":{"Text":"4,5","Value":4.4515151515151512},"Type":4,"ClubName":"Kalmar Golfklubb","CourseName":"Nya Banan","MarkerName":"Andreas Stening","PlayedHoles":18,"PCC":0,"Points":38,"GrossAdjusted":0,"HCPResult":{"Text":"4,5","Value":4.4515151515151512},"Adjustment":null,"Adjustments":null,"IsCounting":true,"IsCalculated":true,"HoleScores":null},{"RoundNumber":0,"RoundDate":"20190914T095000","HCPResultAdjusted":{"Text":"8,2","Value":8.1964788732394354},"Type":4,"ClubName":"Kalmar Golfklubb","CourseName":"Gamla Banan","MarkerName":"Mikael Johansson","PlayedHoles":18,"PCC":0,"Points":33,"GrossAdjusted":0,"HCPResult":{"Text":"8,2","Value":8.1964788732394354},"Adjustment":null,"Adjustments":null,"IsCounting":false,"IsCalculated":true,"HoleScores":null},{"RoundNumber":0,"RoundDate":"20190901T140000","HCPResultAdjusted":{"Text":"6,1","Value":6.0786206896551729},"Type":4,"ClubName":"Kalmar Golfklubb","CourseName":"Gamla Banan","MarkerName":"Kalmar Golfklubb","PlayedHoles":18,"PCC":0,"Points":36,"GrossAdjusted":0,"HCPResult":{"Text":"6,1","Value":6.0786206896551729},"Adjustment":null,"Adjustments":null,"IsCounting":true,"IsCalculated":true,"HoleScores":null},{"RoundNumber":0,"RoundDate":"20190901T090000","HCPResultAdjusted":{"Text":"10,8","Value":10.754482758620689},"Type":4,"ClubName":"Kalmar Golfklubb","CourseName":"Gamla Banan","MarkerName":"Kalmar Golfklubb","PlayedHoles":18,"PCC":0,"Points":30,"GrossAdjusted":0,"HCPResult":{"Text":"10,8","Value":10.754482758620689},"Adjustment":null,"Adjustments":null,"IsCounting":false,"IsCalculated":true,"HoleScores":null},{"RoundNumber":0,"RoundDate":"20190824T090500","HCPResultAdjusted":{"Text":"5,3","Value":5.3075757575757576},"Type":4,"ClubName":"Kalmar Golfklubb","CourseName":"Nya Banan","MarkerName":"Tomas Jagodzinski","PlayedHoles":18,"PCC":0,"Points":37,"GrossAdjusted":0,"HCPResult":{"Text":"5,3","Value":5.3075757575757576},"Adjustment":null,"Adjustments":null,"IsCounting":true,"IsCalculated":true,"HoleScores":null},{"RoundNumber":0,"RoundDate":"20190818T142500","HCPResultAdjusted":{"Text":"13,7","Value":13.727407407407407},"Type":4,"ClubName":"Kalmar Golfklubb","CourseName":"Nya Banan","MarkerName":"Fredrik Bolin","PlayedHoles":18,"PCC":0,"Points":27,"GrossAdjusted":0,"HCPResult":{"Text":"13,7","Value":13.727407407407407},"Adjustment":null,"Adjustments":null,"IsCounting":false,"IsCalculated":true,"HoleScores":null},{"RoundNumber":0,"RoundDate":"20190812T195000","HCPResultAdjusted":{"Text":"6,6","Value":6.6049295774647891},"Type":4,"ClubName":"Kalmar Golfklubb","CourseName":"Gamla Banan","MarkerName":"Andreas Stening","PlayedHoles":18,"PCC":0,"Points":35,"GrossAdjusted":0,"HCPResult":{"Text":"6,6","Value":6.6049295774647891},"Adjustment":null,"Adjustments":null,"IsCounting":false,"IsCalculated":true,"HoleScores":null},{"RoundNumber":0,"RoundDate":"20190810T085500","HCPResultAdjusted":{"Text":"11,3","Value":11.3},"Type":4,"ClubName":"Kalmar Golfklubb","CourseName":"Nya Banan","MarkerName":"Mikael Johansson","PlayedHoles":18,"PCC":0,"Points":30,"GrossAdjusted":0,"HCPResult":{"Text":"11,3","Value":11.3},"Adjustment":null,"Adjustments":null,"IsCounting":false,"IsCalculated":true,"HoleScores":null},{"RoundNumber":0,"RoundDate":"20190807T090000","HCPResultAdjusted":{"Text":"5,0","Value":5.0133802816901412},"Type":4,"ClubName":"Kalmar Golfklubb","CourseName":"Gamla Banan","MarkerName":"Andreas Stening","PlayedHoles":18,"PCC":0,"Points":38,"GrossAdjusted":0,"HCPResult":{"Text":"5,0","Value":5.0133802816901412},"Adjustment":null,"Adjustments":null,"IsCounting":true,"IsCalculated":true,"HoleScores":null},{"RoundNumber":0,"RoundDate":"20190804T142000","HCPResultAdjusted":{"Text":"8,2","Value":8.1964788732394354},"Type":4,"ClubName":"Kalmar Golfklubb","CourseName":"Gamla Banan","MarkerName":"Andreas Stening","PlayedHoles":18,"PCC":0,"Points":33,"GrossAdjusted":0,"HCPResult":{"Text":"8,2","Value":8.1964788732394354},"Adjustment":null,"Adjustments":null,"IsCounting":false,"IsCalculated":true,"HoleScores":null},{"RoundNumber":0,"RoundDate":"20190728T200000","HCPResultAdjusted":{"Text":"1,8","Value":1.8302816901408452},"Type":4,"ClubName":"Kalmar Golfklubb","CourseName":"Gamla Banan","MarkerName":"Andreas Stening","PlayedHoles":18,"PCC":0,"Points":43,"GrossAdjusted":0,"HCPResult":{"Text":"1,8","Value":1.8302816901408452},"Adjustment":null,"Adjustments":null,"IsCounting":true,"IsCalculated":true,"HoleScores":null},{"RoundNumber":0,"RoundDate":"20190724T125000","HCPResultAdjusted":{"Text":"13,3","Value":13.328205128205129},"Type":4,"ClubName":"Bedinge Golfklubb","CourseName":"BeGK 18 hål","MarkerName":"Andreas Stening","PlayedHoles":18,"PCC":0,"Points":30,"GrossAdjusted":0,"HCPResult":{"Text":"13,3","Value":13.328205128205129},"Adjustment":null,"Adjustments":null,"IsCounting":false,"IsCalculated":true,"HoleScores":null},{"RoundNumber":0,"RoundDate":"20190716T195500","HCPResultAdjusted":{"Text":"9,6","Value":9.5878787878787879},"Type":4,"ClubName":"Kalmar Golfklubb","CourseName":"Nya Banan","MarkerName":"Andreas Stening","PlayedHoles":18,"PCC":0,"Points":34,"GrossAdjusted":0,"HCPResult":{"Text":"9,6","Value":9.5878787878787879},"Adjustment":null,"Adjustments":null,"IsCounting":false,"IsCalculated":true,"HoleScores":null},{"RoundNumber":0,"RoundDate":"20190714T194000","HCPResultAdjusted":{"Text":"6,6","Value":6.6049295774647891},"Type":4,"ClubName":"Kalmar Golfklubb","CourseName":"Gamla Banan","MarkerName":"Andreas Stening","PlayedHoles":18,"PCC":0,"Points":38,"GrossAdjusted":0,"HCPResult":{"Text":"6,6","Value":6.6049295774647891},"Adjustment":null,"Adjustments":null,"IsCounting":false,"IsCalculated":true,"HoleScores":null},{"RoundNumber":0,"RoundDate":"20190710T090000","HCPResultAdjusted":{"Text":"13,0","Value":13.012121212121214},"Type":4,"ClubName":"Kalmar Golfklubb","CourseName":"Nya Banan","MarkerName":"Kalmar Golfklubb","PlayedHoles":18,"PCC":0,"Points":30,"GrossAdjusted":0,"HCPResult":{"Text":"13,0","Value":13.012121212121214},"Adjustment":null,"Adjustments":null,"IsCounting":false,"IsCalculated":true,"HoleScores":null},{"RoundNumber":0,"RoundDate":"20190630T090000","HCPResultAdjusted":{"Text":"9,8","Value":9.7880281690140851},"Type":4,"ClubName":"Kalmar Golfklubb","CourseName":"Gamla Banan","MarkerName":"Tomas Jagodzinski","PlayedHoles":18,"PCC":0,"Points":33,"GrossAdjusted":0,"HCPResult":{"Text":"9,8","Value":9.7880281690140851},"Adjustment":null,"Adjustments":null,"IsCounting":false,"IsCalculated":true,"HoleScores":null},{"RoundNumber":0,"RoundDate":"20190627T195000","HCPResultAdjusted":{"Text":"12,2","Value":12.175352112676057},"Type":4,"ClubName":"Kalmar Golfklubb","CourseName":"Gamla Banan","MarkerName":"Andreas Stening","PlayedHoles":18,"PCC":0,"Points":30,"GrossAdjusted":0,"HCPResult":{"Text":"12,2","Value":12.175352112676057},"Adjustment":null,"Adjustments":null,"IsCounting":false,"IsCalculated":true,"HoleScores":null},{"RoundNumber":0,"RoundDate":"20190623T172000","HCPResultAdjusted":{"Text":"11,4","Value":11.379577464788731},"Type":4,"ClubName":"Kalmar Golfklubb","CourseName":"Gamla Banan","MarkerName":"Andreas Stening","PlayedHoles":18,"PCC":0,"Points":31,"GrossAdjusted":0,"HCPResult":{"Text":"11,4","Value":11.379577464788731},"Adjustment":null,"Adjustments":null,"IsCounting":false,"IsCalculated":true,"HoleScores":null}],"TotalItems":50,"NumberOfCountingRounds":8,"DataOffset":25,"SearchStartDate":null,"SearchEndDate":null,"ShowUncalculatedRoundsMessage":false};

            //function setLimit(instance, limitName, value) {
            //    instance.set(limitName, value);
            //}

            app.actions = {
                registerRound: function () {
                    mg.hcp.registerRound.open(null, 'Ronder', 'H&#xE4;r kan du registrera dina handicapronder.');
                    //mg.redirect('/Site/HCP2/Adjustment'); // TODO - Use the javascript logic for this
                }
            };

            app.hcpDevelopment = {
                src: null,
                fpFrom: null,
                fpTo: null,
                init: function () {
                    //var from = app.hcpDevelopment.src[0].RegistrationTime; // TODO - Change this to something better
                    //var to = app.hcpDevelopment.src[app.hcpDevelopment.src.length - 1].RegistrationTime; // TODO - Change this to something better
                    if (!app.hcpDevelopment.src)
                        return; // Nothing to do for now (the tab is now shown)

                    var from = app.hcpDevelopment.src.SearchStartDate;
                    var to = app.hcpDevelopment.src.SearchEndDate;

                    var setFlatpickr = function (id, defaultDate, minDate, maxDate) {
                        return flatpickr(id, {
                            wrap: true,
                            //disableMobile: true,
                            disableMobile: false, // Also the default value. Leaving this as false allows mobile devices to use their native date pickers
                            dateFormat: 'Y-m-d',
                            defaultDate: mg.cc.dateTimeToText(mg.cc.textToDateTime(defaultDate), 'YYYY-MM-DD'),
                            //altInput: true, // TODO - Did we need this altInput thing?
                            //altFormat: mg.flatpickrAltFormat,
                            minDate: minDate,
                            maxDate: maxDate,
                            onChange: function (selectedDates, dateStr, instance) {
                                var date = selectedDates[0];
                                var fpFrom = app.hcpDevelopment.fpFrom;
                                var fpTo = app.hcpDevelopment.fpTo;

                                if (instance.element.id === fpFrom.element.id) {
                                    fpTo.set('minDate', date); // Set the minimum date on the To instance
                                }
                                else if (instance.element.id === fpTo.element.id) {
                                    fpFrom.set('maxDate', date); // Set the maximum date on the From instance
                                }

                                var from = fpFrom && fpFrom.selectedDates && fpFrom.selectedDates.length > 0 ? fpFrom.selectedDates[0] : null;
                                var to = fpTo && fpTo.selectedDates && fpTo.selectedDates.length > 0 ? fpTo.selectedDates[0] : null;

                                app.hcpDevelopment.setActiveTimeframeButton('period');
                                app.hcpDevelopment.load(from, to);
                            }
                        });
                    };

                    app.hcpDevelopment.fpFrom = setFlatpickr('#input-hcp-dp-from', from, mg.cc.textToDate('20040101'), mg.cc.textToDateTime(to));
                    app.hcpDevelopment.fpTo = setFlatpickr('#input-hcp-dp-to', to, mg.cc.textToDateTime(from), new Date((new Date()).getFullYear(), 11, 31));


                    app.hcpDevelopment.render();
                },
                load: function (from, to) {
                    to = to || new Date(); // Default to today
                    to = new Date(to.getFullYear(), to.getMonth(), to.getDate(), 23, 59, 59); // Include all items until 23:59 on the given day

                    var fpFrom = app.hcpDevelopment.fpFrom;
                    var fpTo = app.hcpDevelopment.fpTo;

                    fpFrom.setDate(from);
                    fpTo.set('minDate', from);

                    fpTo.setDate(to);
                    fpFrom.set('maxDate', to);

                    //fpTo.setDate(to);

                    //fpFrom.set('maxDate', to);
                    //pTo.set('minDate', from);

                    from = mg.cc.dateTimeToText(from);
                    //to = mg.cc.dateTimeToText(to || new Date()); // Default to today
                    to = mg.cc.dateTimeToText(to);

                    var src = app.hcpDevelopment.src;

                    if (src) {
                        // TODO - Can we reuse some of the data we have already loaded?

                        if (src.SearchStartDate < from && src.SearchEndDate > to) {
                            // Reuse all existing data
                            app.hcpDevelopment.render(from, to);
                            return;
                        } else {
                            // TODO - If we feel the overhead on loading data is too heavy we may be able to come up with a solution where we can reuse part of the requested dataset if we have already have some of it. This adds some complexity, though, so it is not needed for now
                            //var dataFrom = null;
                            //var dataTo = null;

                            //if (src.SearchStartDate < from && src.SearchEndDate > from && src.SearchEndDate < to) {
                            //    dataFrom = src.SearchEndDate; // Reuse items between from and SearchEndDate
                            //}

                            //if (src.SearchEndDate > from && src.SearchEndDate < to && src.SearchStartDate < from) {
                            //    dataTo = src.SearchEndDate; // Reuse items between SearchEndDate and to
                            //}
                        }
                    }

                    var $result = $('.hcp-development-result');
                    var $spinner = $('.hcp-development-spinner');

                    $result.hide();
                    $spinner.toggleClass('show', true);

                    mg.ajax.post('?handler=DevelopmentItems', { startDate: from, endDate: to }).done(function (data) {
                        //return;
                        $spinner.toggleClass('show', false);
                        $result.show();

                        if (data && !data.ErrorMessage) {
                            app.hcpDevelopment.src = data.Result;
                            // TODO - Can we find a way to make sure the items from override are still in use?
                            app.hcpDevelopment.src.Items.sort(function (a, b) { // Sort the items (not strictly necessary, but if we were to start reusing parts of datasets we have already loaded, we would need to add new items to the existing list, in which case we would need sorting afterwards)
                                return a.RegistrationTime > b.RegistrationTime ? -1 : 1; // Sorting with the most recent first
                            });

                            app.hcpDevelopment.render(from, to);
                        } else {
                            mg.ui.errormodal({ title: mg.translations.Error, html: '<div>' + data.ErrorMessage + '</div>' });
                        }
                    });
                },
                render: function (from, to) {
                    var items = this.src ? this.src.Items : [];
                    var filteredItems = [];

                    items && $.each(items, function (k, v) {
                        //from && console.log(v.RegistrationTime + ' >= ' + from, v.RegistrationTime >= from);
                        //to && console.log(v.RegistrationTime + ' <= ' + to, v.RegistrationTime <= to);

                        if ((!from || v.RegistrationTime >= from) && (!to || v.RegistrationTime <= to)) {
                            filteredItems.push(v);
                        }
                    });

                    this.renderGraph(filteredItems);
                    this.renderList(filteredItems);

                    if (!from && !to) {
                        var dev = [];

                        items && $.each(items, function (k, v) {
                            dev.push(moment(v.RegistrationTime).format('YYYYMMDD') + ' ' + v.HCP.Text);
                        });

                        $('#txt-override').val(dev.join('\n'));
                    }
                },
                renderGraph: function (items) {
                    //var items = this.src ? this.src.Items : [];

                    var data = [];
                    var pointRadiusList = [];
                    var maxValue = 0;

                    $.each(items, function (k, v) {
                        data.push({
                            x: mg.cc.textToDateTime(v.RegistrationTime),
                            y: v.HCP.Value
                        });

                        if (v.HCP.Value > maxValue)
                            maxValue = v.HCP.Value;

                        var pointRadius = 5;

                        if (k > 0) {
                            var prevItem = items[k - 1];

                            if (prevItem && prevItem.HCP.Value === v.HCP.Value) {
                                pointRadius = 2; // Show a smaller dot for registrations where the HCP was unchanged. TODO - Confirm this
                            }
                        }

                        pointRadiusList.push(pointRadius);
                    });

                    var now = new Date();

                    // TODO - We need a proper way to display when there is only one result

                    if (app.graph) {
                        //app.graph.data.datasets[0].data = data;
                        //app.graph.update();
                        app.graph.destroy();
                    }

                    var minDate = new Date(2000, 0, 1);
                    var maxDate = now;

                    if (data && data.length > 0) {
                        minDate = data[0].x;
                        maxDate = data[data.length - 1].x;
                    }

                    app.graph = new Chart('hcp-graph-2', {
                        type: 'line',
                        data: {
                            datasets: [
                                {
                                    fill: false,
                                    data: data,
                                    pointRadius: pointRadiusList
                                }
                            ]
                        },

                        options: {
                            responsive: true, // These two lines will allow the graph to take up the full height
                            maintainAspectRatio: false,

                            legend: {
                                display: false
                            },

                            tooltips: {
                                xPadding      : 15,
                                yPadding      : 15,
                                cornerRadius  : 5,
                                displayColors : false,

                                callbacks: {
                                    label: function(tooltipItem, data) {
                                        return 'HCP: ' + tooltipItem.yLabel;
                                    }
                                }
                            },

                            elements: {
                                line: {
                                    //fill: false
                                    borderColor: '#49B768',
                                    borderWidth: 2,
                                    tension: 0,
                                    //tension: 0.5
                                },
                                point: {
                                    //fill: false
                                    backgroundColor: '#49B768',
                                    //radius: 5
                                }
                            },

                            scales: {
                                xAxes: [
                                    {
                                        type: 'time',
                                        //offset: true,

                                        time: {
                                            displayFormats: {
                                                //millisecond : 'HH' + mg.dateTimeFormat.TimeSeparator + 'mm' + mg.dateTimeFormat.TimeSeparator + 'ss.SSS',
                                                //second      : 'HH' + mg.dateTimeFormat.TimeSeparator + 'mm' + mg.dateTimeFormat.TimeSeparator + 'ss',
                                                minute      : 'HH' + mg.dateTimeFormat.TimeSeparator + 'mm',
                                                hour        : 'HH',
                                                day         : 'D. MMM',
                                                //week        : 'D. MMM [\']YY',
                                                month       : 'MMM [\']YY',
                                                //quarter     : '[Q]Q - [\']YY',
                                                //year        : 'YYYY'
                                            },

                                            tooltipFormat: 'D. MMMM YYYY',

                                            //min: new Date(2015, 0, 1).getTime()
                                        },

                                        ticks: {
                                            //minRotation: 20,
                                            //maxRotation: 3
                                            callback: function (value, index, values) {
                                                //console.log(value, index, values);
                                                return value;
                                            }
                                        }

                                        // Can't seem to make this work
                                        //gridLines: {
                                        //    drawOnChartArea: false
                                        //}

                                        //afterTickToLabelConversion: function (scaleInstance) {
                                        //    console.log(scaleInstance);
                                            
                                        //}
                                    }
                                ],

                                yAxes: [
                                    {
                                        //offset: true,

                                        ticks: {
                                            precision: 1,
                                            //suggestedMin: 13.2,
                                            suggestedMax: maxValue + (maxValue >= 36 ? 1 : 0.1), // Suggest that the graph ends at one decimal point higher than the max value in the dataset, unless the max value is 36 or above, in which case we increment with 1
                                            //padding: 5,

                                            callback: function (value) {
                                                var minFractionDigits = 1;
                                                var maxFractionDigits = 1;

                                                if (value >= 36) {
                                                    minFractionDigits = 0;
                                                    maxFractionDigits = 0;
                                                }

                                                return value.toLocaleString(mg.culture, {
                                                    minimumFractionDigits: minFractionDigits,
                                                    maximumFractionDigits: maxFractionDigits
                                                });

                                                //var is36OrOver = value >= 36;

                                                //console.log('minimumFractionDigits', is36OrOver ? 0 : 1);
                                                //console.log('maximumFractionDigits', is36OrOver ? 0 : 1);

                                                //return value.toLocaleString(mg.culture, {
                                                //    minimumFractionDigits: is36OrOver ? 0 : 1,
                                                //    maximumFractionDigits: is36OrOver ? 0 : 1
                                                //});
                                            }
                                        }
                                    }
                                ]
                            },

                            plugins: {
                                zoom: {
                                    pan: {
                                        enabled: true,
                                        mode: 'xy',
                                        rangeMin: {
                                            //x: new Date(2000, 0, 1).getTime(), // TODO - Get a proper limit, this was stolen from the HCPService
                                            x: minDate,
                                            y: -8
                                        },
                                        rangeMax: {
                                            //x: new Date(now.getFullYear(), 11, 31).getTime(), // Limit to the 31st of December of the current year
                                            x: maxDate,
                                            y: 99
                                        }
                                    },
                                    zoom: {
                                        enabled: true,
                                        //drag: true,
                                        mode: 'xy',
                                        speed: 0.1,
                                        rangeMin: {
                                            //x: new Date(2000, 0, 1).getTime(), // TODO - Get a proper limit, this was stolen from the HCP service
                                            x: minDate,
                                            y: -8
                                        },
                                        rangeMax: {
                                            //x: new Date(now.getFullYear(), 11, 31).getTime(), // Limit to the 31st of December of the current year
                                            x: maxDate,
                                            y: 99
                                        }
                                    }
                                }
                            }
                        },

                        //plugins: {
                        //    zoom: {
                        //        zoom: {
                        //            enabled: true,
                        //            drag: true,
                        //            mode: 'xy',
                        //            speed: 0.1
                        //        }
                        //    }
                        //}
                    });
                },
                renderList: function (items) {
                    //var items = this.src ? this.src.Items : [];
                    var html = [];
                    //var rows = [];
                    var egaRows = []; // Rows displaying an EGA Handicap should be placed in their own list

                    if (items.length > 0) {
                        var addRow = function (date, hcp, className, rowsArray) {
                            var target = rowsArray || html; // Default to the the html instance

                            target.push([
                                '<div class="' + (className ? className : 'list-item') + '">',
                                    '<div class="date">' + date + '</div>',
                                    '<div class="hcp">' + hcp + '</div>',
                                '</div>'
                            ].join(''));
                        }

                        //items = items.slice().reverse(); // Create a copy of the list and reverse it, in order to have the latest round first
                        items = items.slice(); // Create a copy of the list
                        //items.sort(function (a, b) {
                        //    return a.RegistrationTime < b.RegistrationTime ? 1 : -1; // Reverse the order, with the latest date first
                        //});

                        var exactHCPItems = []; // Items from after changing to Exact HCP
                        //var exactHCPChangeDate = '20200201T000000'; // TODO - Change to the value below
                        //var exactHCPChangeDate = '20200301T000000';
                        var egaHCPItems = []; // Items from before changing to Exact HCP

                        $.each(items, function (k, v) {
                            if (v.ShowInWHSList) {
                                exactHCPItems.push(v);
                            }

                            if (v.ShowInEGAList) {
                                egaHCPItems.push(v);
                            }

                            //if (v.RegistrationTime >= exactHCPChangeDate) {
                            //    exactHCPItems.push(v);
                            //} else {
                            //    egaHCPItems.push(v);
                            //}
                        });
                        
                        if (exactHCPItems.length) {
                            addRow('Datum', 'Exakt handicap', 'list-header');

                            $.each(exactHCPItems, function (k, v) {
                                addRow(moment(mg.cc.textToDateTime(v.RegistrationTime)).format('YYYY-MM-DD'), v.HCP.Text); // TODO - Is this how we want to format the dates?
                            });
                        }

                        if (egaHCPItems.length) {
                            addRow('Datum', 'EGA Handicap', 'list-header', egaRows);

                            $.each(egaHCPItems, function (k, v) {
                                addRow(moment(mg.cc.textToDateTime(v.RegistrationTime)).format('YYYY-MM-DD'), v.HCP.Text, '', egaRows); // TODO - Is this how we want to format the dates?
                            });
                        }
                    }
                    else
                        html.push('Ingen f&#xF6;r&#xE4;ndring inom vald datumperiod');

                    var $hcpDevelopmentList = $('#hcp-development-list');
                    $hcpDevelopmentList.html(html.join(''));

                    if (egaRows.length > 0 && $('#hcp-development-list-ega').length === 0) {
                        $hcpDevelopmentList.after('<div id="hcp-development-list-ega" class="hcp-development-list"></div>');

                        //$('#hcp-development-list-ega').html(egaRows.join(''));

                        //$hcpDevelopmentList.after([
                        //    '<div id="hcp-development-list-ega" class="hcp-development-list">',
                        //        egaRows.join(''),
                        //    '</div>'
                        //].join(''));
                    }

                    $('#hcp-development-list-ega').html(egaRows.join(''));
                },
                onTimeframeBtnClick: function (element) {
                    var $element = $(element);
                    //$element.addClass('active');
                    var val = $element.attr('data-value');
                    var isPeriodSelector = val === 'period';
                    var isSticky = $element.parents('.timeframe-selector-wrapper').hasClass('sticky');
                    var from = new Date();
                    //console.log(val);
                    switch (val) {
                        case '1yr':
                            from.setYear(from.getFullYear() - 1);
                            break;
                        case '6mon':
                            from.setMonth(from.getMonth() - 6);
                            break;
                        //case '1mon':
                        //    from.setMonth(from.getMonth() - 1);
                        //    break;
                        default:
                            from = null; // Unable to resolve value, don't use this
                            break;
                    }

                    if (from) {
                        //console.log('loading from', from);
                        app.hcpDevelopment.load(from);
                        app.hcpDevelopment.setActiveTimeframeButton(val);
                        //$('.timeframe-selector .timeframe-item.active').removeClass('active')
                        //$('.timeframe-selector .timeframe-item[data-value="' + val + '"]').addClass('active');
                    }
                    else if (isPeriodSelector) {
                        //var $dropdownMenu = $('.dropdown-menu', $element.parents('.timeframe-selectors'));
                        var $dropdownMenu = $('.dropdown-menu', '.hcp-tab-development'); // Make sure we're using the right instance

                        if (!$dropdownMenu.hasClass('show')) {
                            $dropdownMenu.toggleClass('show');

                            //if (isSticky) {
                            //    mg.scrollTo($('.timeframe-selectors', '.hcp-tab-development'), undefined, -10); // Scroll to the original timeframe-selectors element. We scroll a bit further upwards to make sure the sticky header is disappeared
                            //}

                            //var onWindowClick = function () {
                            //    console.log('Jeg heter Finn!');
                            //};

                            //$(document).off('click', onWindowClick).on('click', onWindowClick);

                            $(document).off('click', app.hcpDevelopment.onDocumentClick); // Remove the existing listener, if any

                            setTimeout(function () {
                                $(document).on('click', app.hcpDevelopment.onDocumentClick);
                            }, 50); // For some reason this click listener is triggered immediately after we start showing the dropdown menu, so we add a short delay to make sure it isn't closed right away
                        }

                        if (isSticky) {
                            mg.scrollTo($dropdownMenu.parents('.timeframe-selectors'), undefined, -10); // Scroll to the original timeframe-selectors element. We scroll a bit further upwards to make sure the sticky header is disappeared
                        }
                    }
                },
                setActiveTimeframeButton: function (value) {
                    $('.timeframe-selector .timeframe-item.active').removeClass('active')
                    $('.timeframe-selector .timeframe-item[data-value="' + value + '"]').addClass('active');
                },
                onDocumentClick: function (e) {
                    //console.log(e);
                    //console.log('qwer');

                    var $target = $(e.target);

                    if ($target.hasClass('timeframe-item') && $target.attr('data-value') === 'period' && $target.parents('.timeframe-selector-wrapper').hasClass('sticky')) {
                        return; // Clicking the Period button in the sticky header while the period dropdown is shown shouldn't close the dropdown. Instead we expect the window to scroll the dropdown into view (happens in the onTimeframeBtnClick function)
                    }

                    if ($target.parents('.dropdown-menu').length === 0) {
                        $('.dropdown-menu.show').removeClass('show');
                        $(document).off('click', app.hcpDevelopment.onDocumentClick); // Remove the listener
                    }
                },
                override: function () { // TODO - Remove this when no longer needed
                    var vals = $('#txt-override').val().split('\n');
                    var items = [];

                    vals && $.each(vals, function (k, v) {
                        var val = v.split(' ');
                        var date = mg.cc.textToDate(val[0]);
                        var hcp = mg.cc.toHcp(val[1]);

                        items.push({
                            RegistrationTime: mg.cc.dateToText(date),
                            HCP: {
                                Text: mg.cc.hcpToText(hcp),
                                Value: hcp
                            }
                        });
                    });

                    this.src = {
                        Items: items,
                        SearchStartDate: null,
                        SearchEndDate: null,
                        IsOverride: true
                    };

                    this.render();
                }
            };

            app.rounds = {
                src: null,
                load: function (max, offset, callback) {
                    //from = from ? mg.cc.dateTimeToText(from) : null;
                    //to = mg.cc.dateTimeToText(to || new Date()); // Default to today
                    //var offset = 0; // TODO
                    offset = offset || 0;
                    var from = null; // TODO - These are not in use for now, but will be once we allow showing all items within a specified timeframe
                    var to = null;

                    if (offset === 0 && hcpRounds)
                        app.rounds.src = hcpRounds;

                    var $result = $('.hcp-rounds-result');
                    var $spinner = $('.hcp-rounds-spinner');
                    var isShowMore = offset > 0; // If offset is not 0, we assume it's a "show more" action, in which case we assume for now that the show more logic has already shown a spinner. This may change when the user is allowed to select a timeframe
                    var roundNumberOffset = 0;

                    if (isShowMore) {
                        roundNumberOffset = app.rounds.src && app.rounds.src.Items && app.rounds.src.Items.length ? app.rounds.src.Items[app.rounds.src.Items.length - 1].roundNumber : roundNumberOffset;
                    }
                    else {
                        $result.hide();
                        $spinner.toggleClass('show', true);
                    }

                    var done = function () {
                        var numberOfCountingRounds = offset === 0 ? app.rounds.src.NumberOfCountingRounds : undefined;
                        numberOfCountingRounds !== undefined && $('label[for="chkShowOnlyCountingRounds"]').html('Visa endast %num% b&#xE4;sta'.replace('%num%', numberOfCountingRounds));
                        app.rounds.render(roundNumberOffset);

                        $('.show-more-wrapper .btn-show-more', '.hcp-rounds-result').toggle(app.rounds.src.DataOffset < app.rounds.src.TotalItems); // Only show this if there are more items to be retrieved
                    };

                    if (hcpRounds && hcpRounds.Items && hcpRounds.Items.length > offset) {
                        $spinner.toggleClass('show', false);
                        $result.show();

                        done();
                        return; // This could instead have been an if-else, but this works for now, and saves us from having the entire ajax block beneath this marked as changed. We just have to make sure we're not adding anything else beneath that
                    }

                    mg.ajax.post('?handler=RoundItems', { max: max, offset: offset, startDate: from, endDate: to}).done(function (data) {
                        $spinner.toggleClass('show', false);
                        $result.show();

                        if (data && !data.ErrorMessage) {
                            if (!app.rounds.src)
                                app.rounds.src = data.Result;
                            else {
                                data.Result.Items && $.each(data.Result.Items, function (k, v) {
                                    app.rounds.src.Items.push(v); // We assume we can just add new items at the end of the current, as items should already be sorted with the latest first
                                });

                                app.rounds.src.DataOffset = Math.max(app.rounds.src.DataOffset, data.Result.DataOffset); // Use the highest value of these two. TODO - Once we allow showing all items within a specified timeframe we need to handle this differently. We probably want to reset the DataOffset if a different date is set
                                app.rounds.src.TotalItems = data.Result.TotalItems;
                                app.rounds.src.ShowUncalculatedRoundsMessage = app.rounds.src.ShowUncalculatedRoundsMessage || data.Result.ShowUncalculatedRoundsMessage;
                            }

                            done();
                        } else {
                            mg.ui.errormodal({ title: mg.translations.Error, html: '<div>' + data.ErrorMessage + '</div>' });
                        }
                        //console.log(app.rounds.src)
                        $.isFunction(callback) && callback();
                    });
                },
                init: function () {
                    if (!app.rounds.src) { // First time, load data
                        //app.rounds.load(25, new Date(2020, 0, 1), new Date(2020, 11, 31)); // TODO - Remove the dates once we no longer need the test data
                        app.rounds.load(25); // Load the latest 25 items
                    }
                },
                render: function (roundNumberOffset) {
                    var items = this.src ? this.src.Items : [];
                    var filteredItems = [];

                    items && $.each(items, function (k, v) {
                        if (true) { // TODO - Filter
                            filteredItems.push(v);
                        }
                    });

                    //debugger;
                    //items = items.slice().reverse(); // Create a copy of the list and reverse it, in order to have the latest round first
                    items = items.slice(); // Create a copy of the list
                    var mainCount = 20;
                    //var mainItems = items.splice(0, mainCount); // The latest x items

                    var mainItems = [];
                    var secondaryItems = [];
                    //var countingItemsAdded = 0;
                    var roundNumber = 0; // TODO - We may need to do make this account for "show more"

                    items && $.each(items, function (k, v) {
                        v.roundNumber = v.IsCalculated ? ++roundNumber : 0;

                        //if (!v.IsCalculated || countingItemsAdded < 20) { // Up to 20 counting rounds are shown in the main list
                        //    mainItems.push(v);
                        //    v.IsCalculated && countingItemsAdded++;
                        //}
                        //else {
                        //    secondaryItems.push(v);
                        //}

                        if (roundNumberOffset === 0 || v.roundNumber > roundNumberOffset) { // If roundNumberOffset is larger than 0, we only include rounds after that
                            if (v.roundNumber <= 20) { // Items up to round 20 are shown in the main list
                                mainItems.push(v);
                            }
                            else {
                                secondaryItems.push(v);
                            }
                        }
                    });

                    if (this.src.ShowUncalculatedRoundsMessage) {
                        app.showWarning('Något har gått fel med registreringen.<br class="d-lg-none" /> <a href="javascript:void(0)">Läs mer...</a>', mg.pages.hcp2.showUncalculatedRoundsModal);
                    }

                    if (mainItems.length > 0) {
                        var $roundsList = $('#hcp-rounds-list');
                        this.renderList(mainItems, $roundsList, roundNumberOffset);
                    }
                    //$('.list-item', $roundsList).eq(0).trigger('click'); // TODO - Do we need the first item to expand automatically?

                    //if (items.length > 0) { // If there are still any remaining items, show them in a new list
                    //    $roundsList.after('<div id="hcp-rounds-list-secondary" class="hcp-rounds-list hcp-rounds-list-secondary"></div>');
                    //    this.renderList(items, $('#hcp-rounds-list-secondary'), mainCount);
                    //}

                    if (secondaryItems.length > 0) {
                        var $secondaryRoundsList = $('#hcp-rounds-list-secondary');

                        if ($secondaryRoundsList.length === 0) {
                            $roundsList.after('<div id="hcp-rounds-list-secondary" class="hcp-rounds-list hcp-rounds-list-secondary"></div>');
                            $secondaryRoundsList = $('#hcp-rounds-list-secondary');
                        }

                        //$roundsList.after('<div id="hcp-rounds-list-secondary" class="hcp-rounds-list hcp-rounds-list-secondary"></div>');
                        this.renderList(secondaryItems, $('#hcp-rounds-list-secondary'), roundNumberOffset);
                    }

                    //this.renderList(items);
                },
                renderList: function (items, $list, roundNumberOffset) {
                    roundNumberOffset = roundNumberOffset || 0; // Default to 0
                    var isFullList = roundNumberOffset === 0; // If roundNumberOffset is greater than 0, we assume we need to add to an existing list and not render a new one
                    var html = [];

                    if (items.length > 0) {
                        var addRow = function (number, date, HCPResultAdjusted, className) {
                            html.push([
                                '<div class="' + (className ? className : '') + '">',
                                    '<div class="number">' + number + '</div>',
                                    '<div class="date">' + date + '</div>',
                                    '<div class="hcp-result-adjusted>' + HCPResultAdjusted + '</div>',
                                '</div>'
                            ].join(''));
                        };

                        //items = items.slice().reverse(); // Create a copy of the list and reverse it, in order to have the latest round first

                        var cols = [];
                        var data = [];

                        var addCol = function (dataProp, title, className, isFirstBlock) {
                            cols.push({ dataProp: dataProp, title: title, className: className, isFirstBlock: isFirstBlock });
                        };

                        var hasAdjustment = false;

                        $.each(items, function (k, v) {
                            if (v.Adjustment) {
                                hasAdjustment = true;
                                return false; // Break the loop
                            }
                        });

                        addCol('number', 'Rond', 'round-number', true);
                        addCol('date', 'Datum', 'date');
                        addCol('club', 'Klubb', 'club');
                        addCol('typeText', 'Typ', 'round-type');
                        addCol('playedHoles', 'H&#xE5;l', 'played-holes');
                        addCol('points', 'Po&#xE4;ng', 'points');
                        addCol('adjustedGross', 'Just. brutto', 'adjusted-gross');
                        //addCol('hcpResultAdjusted', 'Just. hcp-resultat', 'hcp-result-adjusted');
                        addCol('hcpResultAdjusted', hasAdjustment ? 'Just. hcp-resultat' : 'Hcp-resultat', 'hcp-result-adjusted');

                        //var roundNumber = roundNumberOffset + 0; // Add 0 to make sure we've got a copy and not a reference

                        $.each(items, function (k, v) {
                            var indicatorClass = v.Type === 1 ? 'booking' : v.Type === 2 ? 'competition' : 'system';
                            var roundDate = moment(mg.cc.textToDateTime(v.RoundDate));

                            //var currentRoundNumber = v.IsCalculated ? ++roundNumber : 0;

                            data.push({
                                base: v,
                                //number: '<span class="indicator ' + indicatorClass + '">&nbsp;</span><span class="round-value">' + (k + 1 + roundNumberOffset) + '</span>',
                                //number: '<span class="round-value">' + (k + 1 + roundNumberOffset) + '</span>',
                                //number: '<span class="round-value">' + (currentRoundNumber || '') + '</span>',
                                number: '<span class="round-value">' + (v.roundNumber || '') + '</span>',
                                //number: k + 1,
                                date: roundDate.format('YYYY-MM-DD'),
                                time: mg.cc.formatTime(roundDate),
                                //clubName: v.ClubName,
                                club: '<span>' + v.ClubName + '</span><span class="club-extended"><span>, </span><span class="course-name">' + v.CourseName + '</span>',
                                type: v.Type,
                                typeText: v.Type === 1 ? 'S&#xE4;llskap' : (v.Type === 2 ? 'T&#xE4;vling' : (v.Type === 4 ? '' : 'System')),
                                playedHoles: v.PlayedHoles || '',
                                points: v.Points || '',
                                adjustedGross: v.GrossAdjusted || '',
                                hcpResult: v.HCPResult ? v.HCPResult.Text : '',
                                hcpResultAdjusted: v.HCPResultAdjusted ? v.HCPResultAdjusted.Text : '',
                                isCounting: v.IsCounting,
                                markerName: v.MarkerName,
                                pcc: v.PCC !== undefined && v.PCC !== null ? (v.PCC > 0 ? '+' : '') + v.PCC : '',
                                adjustment: v.Adjustment ? v.Adjustment.Text : '',
                                holeScores: v.HoleScores
                            });
                        });

                        //var colsHTML = [];
                        //$.each(cols, function (k, v) {
                        //    colsHTML.push('<div' + (v.className ? ' class="' + v.className + '"' : '') + '>' + v.title + '</div>');
                        //});

                        //colsHTML && html.push('<div class="list-header">' + colsHTML.join('') + '</div>');

                        if (isFullList) {
                            var listHeaderFirstBlockHTML = []; // Each row (header and item) is split into two blocks. For now, the first block just contains the round number, while the rest is in the second block. This allows us to have the same width on the extended content (when a row is expanded) as on the main part of the row.
                            var listHeaderInnerHTML = [];

                            $.each(cols, function (k, v) {
                                var colHTML = '<div' + (v.className ? ' class="' + v.className + '"' : '') + '>' + v.title + '</div>';

                                if (v.isFirstBlock) { // The isFirstBlock parameter decides whether a column is in the first or second block
                                    listHeaderFirstBlockHTML.push(colHTML);
                                } else {
                                    listHeaderInnerHTML.push(colHTML);
                                }
                            });

                            html.push([
                                '<div class="list-header">',
                                    //'<div class="round-number">1</div>',
                                    '<div class="list-header-first-block">',
                                        '<div class="list-header-inner">' + listHeaderFirstBlockHTML.join('') + '</div>',
                                    '</div>',
                                    '<div class="list-header-second-block">',
                                        '<div class="list-header-inner">' + listHeaderInnerHTML.join('') + '</div>',
                                    '</div>',
                                '</div>'
                            ].join(''));
                        }

                        $.each(data, function (k, v) {
                            var firstBlockCells = [];
                            var innerCells = [];
                            var indicatorClass = v.type === 1 ? 'booking' : v.type === 2 ? 'competition' : v.type === 4 ? 'none' : 'system';

                            $.each(cols, function (kC, vC) {
                                var colHTML = '<div' + (vC.className ? ' class="' + vC.className + '"' : '') + '>' + v[vC.dataProp] + '</div>';

                                if (vC.isFirstBlock) {
                                    firstBlockCells.push(colHTML);
                                } else {
                                    innerCells.push(colHTML);
                                }
                            });

                            var renderKeyValuePair = function (title, value, className, onclick) {
                                return [
                                    '<div class="kvp' + (className ? ' ' + className : '') + '"' + (onclick ? ' onclick="' + onclick + '"' : '') + '>',
                                        '<span>' + title + '</span>',
                                        '<span>' + value + '</span>',
                                    '</div>'
                                ].join('');
                            };

                            //v.adjustment = null;
                            var hasAdjustment = v.adjustment;
                            //var showScorecardHTML = '<span class="toggle-scorecard" onclick="mg.pages.hcp2.rounds.toggleScorecard(this);">Visa scorekort</span>';
                            var showScorecardHTML = '<span class="toggle-scorecard" onclick="mg.pages.hcp2.rounds.toggleScorecard(this);">Scorekort</span>';
                            
                            var extended = [];
                            extended.push([
                                '<div class="list-item-extended-row">',
                                    '<div class="club">' + v.club + '</div>',
                                    renderKeyValuePair('Mark&#xF6;r:', (v.markerName || '-'), 'marker'),
                                    '<div class="time">' + v.time + '</div>',
                                    '<div class="w-100 d-lg-none"></div>', // Force a new line in mobile
                                    renderKeyValuePair('Spelade h&#xE5;l', v.playedHoles, 'played-holes'),
                                    v.pcc !== '' ? renderKeyValuePair('PCC', v.pcc, 'pcc') : '', // TODO - Should a null be shown as 0?
                                    '<div class="type">',
                                        '<span>' + v.typeText + '</span>',
                                    '</div>',
                                    '<hr />',
                                    renderKeyValuePair('Po&#xE4;ng', v.points, 'points'),
                                    renderKeyValuePair('Just. brutto', v.adjustedGross, 'adjusted-gross'),
                                    '<div class="w-100 d-lg-none"></div>', // Force a new line
                                    hasAdjustment ? renderKeyValuePair('Hcp-resultat', v.hcpResult, 'hcp-result') : '',
                                    //'<div class="spacer d-lg-none"></div>',
                                    hasAdjustment ? renderKeyValuePair('Justering', v.adjustment, 'adjustment', 'mg.pages.hcp2.rounds.onAdjustmentClicked(this)') : '',
                                    v.holeScores && v.holeScores.length > 0 ? '<div class="show-scorecard">' + showScorecardHTML + '</div>' : '',
                                '</div>'
                            ].join(''));

                            //hasAdjustment && extended.push([
                            //    '<div class="list-item-extended-row">',
                            //        showScorecardHTML,
                            //    '</div>'
                            //].join(''));

                            html.push([
                                '<div class="list-item' + (v.isCounting ? ' is-counting' : '') + (!v.base.IsCalculated ? ' disabled' : '') + '" data-round-date="' + v.base.RoundDate + '">',
                                    '<div class="indicator ' + indicatorClass + '">&nbsp;</div>',
                                    '<div class="list-item-flex-wrapper">',
                                        '<div class="list-item-first-block">',
                                            '<div class="list-item-inner">' + firstBlockCells.join('') + '</div>',
                                        '</div>',
                                        '<div class="list-item-second-block">',
                                            '<div class="list-item-inner">' + innerCells.join('') + '</div>',
                                            '<div class="list-item-extended">' + extended.join('') + '</div>',
                                        '</div>',
                                    '</div>',
                                '</div>'
                            ].join(''));
                        });
                    } else {
                        html.push('Inga ronder inom vald datumperiod');
                    }

                    //var $list = $('#hcp-rounds-list');
                    if (isFullList)
                        $list.html(html.join(''));
                    else
                        $list.append(html.join(''));

                    $('.list-item', $list).off('click').on('click', function (e) {
                        var $target = $(e.target);
                        var $item = $target.hasClass('list-item') ? $target : $target.parents('.list-item');

                        var isExpanded = $item.hasClass('expanded');
                        var $extendedContent = $('.list-item-extended, .scorecard-wrapper', $item); // This targets both .list-item-extended and .scorecard. TODO - We may want to change the structure a bit so we don't have to do this, can we do that?
                        var animationTime = 250; // todo - fix animation when coursename is on new line

                        if (isExpanded) {
                            $extendedContent.slideUp(animationTime, function () {
                                //$('.scorecard', $item).remove();
                                app.rounds.toggleScorecard($('.toggle-scorecard', $item), true);
                            });

                            $item.removeClass('expanded'); // Execute the removeClass function after starting the slideUp animation. The removeClass will appear to happen simultaneously with the animation, instead of before or after
                            //$('.scorecard', $item).remove();

                            //$extendedContent.animate({ height: 0 }, 250, 'swing', function () {
                            //    $item.removeClass('expanded');
                            //    $extendedContent.css('height', ''); // Reset this
                            //});
                        } else {
                            $extendedContent.slideDown(animationTime);
                            $item.addClass('expanded'); // Execute the addClass function after starting the slideDown animation. The addClass will appear to happen simultanously with the animation, instead of before or after

                            //var height = $extendedContent.height(); // Even though the element is not shown we can still read its height, in order to use it for the animation. It is important we remove the height afterwards
                            //console.log('showing ;)', height);

                            //$extendedContent.css('height', 0);
                            //$item.addClass('expanded');

                            //$extendedContent.animate({ height: height }, 250, 'swing', function () {
                            //    $extendedContent.css('height', ''); // Reset this
                            //});
                        }
                    });

                    //$('.list-item', $roundsList).eq(0).trigger('click');
                },
                toggleShowOnlyCountingRounds: function (element) {
                    var $list = $('#hcp-rounds-list');
                    var $listSecondary = $('.hcp-rounds-list-secondary');
                    var $items = $('.list-item', $list);

                    if (element.checked) {
                        $items.hide(); // Hide all items
                        $items.filter('.is-counting').show(); // Show counting rounds

                        $listSecondary.hide(); // Hide the secondary lists
                    } else {
                        $items.show(); // Show all items
                        $listSecondary.show(); // Show the secondary lists
                    }
                },
                getRoundData: function ($item) {
                    var item = null;
                    var roundDate = $item.attr('data-round-date');
                    $.each(app.rounds.src.Items, function (k, v) {
                        if (v.RoundDate === roundDate) { // TODO - Is this a good enough comparison, or should we use the ID instead? (not currently exposed)
                            item = v;
                            return false; // Break the v-loop
                        }
                    });

                    return item;
                },
                onAdjustmentClicked: function (target) {
                    var $target = $(target);
                    var $item = $target.parents('.list-item');
                    var item = app.rounds.getRoundData($item);

                    if (item && item.Adjustments) {
                        app.showAdjustmentModal(item.Adjustments);
                    }

                    event.stopPropagation(); // Stop propagation to prevent the row from collapsing
                    return false; // Stop propagation
                },
                toggleScorecard: function (target, forceClose) {
                    event && event.stopPropagation(); // Stop propagation to prevent the row from collapsing
                    var $target = $(target);
                    var $item = $target.parents('.list-item');
                    var $scorecard = $('.scorecard-wrapper', $item);
                    var animationTime = 250;

                    var hasScorecard = $scorecard.length > 0;

                    if (hasScorecard || forceClose) {
                        var resetText = function () {
                            //$target.html('Visa scorekort'); // TODO - Translation
                            //$target.html('Scorekort'); // TODO - Translation - TODO - We may be able to skip this if the text is not changing
                        };

                        if (hasScorecard) {
                            $scorecard.slideUp(animationTime, function () {
                                $scorecard.remove();
                            });

                            resetText();
                        }
                        else if (forceClose) {
                            resetText(); // We only need to reset the text
                        }

                        return;

                        //$scorecard.slideUp(animationTime, function () {
                        //    $scorecard.remove();
                        //});

                        //$target.html('Visa scorekort'); // TODO - Translation
                        //return;
                    }

                    var item = app.rounds.getRoundData($item);

                    var holes = item ? item.HoleScores : [];
                    var idx = $item.index(); // Only used with the hardcoded data to simulate a bit of a difference

                    //for (var i = 0; i < 18; i++) { // TODO - Replace this hardcoded data
                    //    var hole = {
                    //        Number: i + 1,
                    //        Index: 18 - i,
                    //        Par: 4,
                    //        Strokes: 7,
                    //        AdjustedGross: 6,
                    //        Points: 3
                    //    };

                    //    if (i >= item.PlayedHoles) {
                    //        hole.Strokes = '';
                    //        hole.AdjustedGross = '';
                    //        hole.Points = 0;
                    //    }

                    //    holes.push(hole);
                    //}

                    mg.hcp.scorecard.render({
                        $target: $item,
                        renderAsHidden: true, // Start by not showing this. The .slideDown animation will make sure it's displayed
                        holes: holes,
                        playedHoles: item.PlayedHoles,
                        columns: {
                            Strokes: {
                                highlightCells: true
                            }
                        }
                    });

                    //var scorecardColumns = [];

                    //var addCol = function (dataProp, title, className, showSums, highlightFunc, highlightCells) {
                    //    scorecardColumns.push({
                    //        dataProp: dataProp,
                    //        title: title,
                    //        className: className,
                    //        showSums: showSums,
                    //        highlightFunc: highlightFunc, // TODO - Remove this when we no longer need it
                    //        highlightCells: highlightCells
                    //    });
                    //};

                    //addCol('Number', 'Hål', 'hole', false, function (hole) {
                    //    return hole && hole.Strokes;
                    //}, true);

                    //addCol('Index', 'Index', 'index');
                    //addCol('Par', 'Par', 'par', true);
                    //addCol('Strokes', 'Slag', 'strokes', true, function () { return true; }, true);
                    //addCol('AdjustedBrutto', 'Just. Brutto', 'adjusted-brutto', true);
                    //addCol('Points', 'Poäng', 'points', true);

                    //var scorecardHTML = [];
                    //var headerCells = [];

                    //$.each(scorecardColumns, function (k, v) {
                    //    //headerCells.push('<div' + (v.className ? ' class="' + v.className + '"' : '') + '>' + v.title + '</div>');
                    //    headerCells.push([
                    //        '<div class="cell' + (v.className ? ' ' + v.className + '' : '') + '">',
                    //            '<div class="cell-inner">' + v.title + '</div>',
                    //        '</div>',
                    //    ].join(''));
                    //});

                    //scorecardHTML.push('<div class="scorecard-header">' + headerCells.join('') + '</div>');

                    //var scorecardRows = [];
                    //var totals = {};

                    //var renderColumn = function (col, dataProp, className, showSums) {
                    //    var dataProp = col.dataProp;
                    //    var className = col.className;
                    //    var showSums = col.showSums;
                    //    var highlightFunc = col.highlightFunc;
                    //    var cells = [];

                    //    var splitCells = holes.length > 9 && holes.length % 2 === 0;

                    //    var renderBlock = function (holes, showSum) {
                    //        var sum = 0;

                    //        $.each(holes, function (k, v) {
                    //            //var highlight = highlightFunc && highlightFunc(v);
                    //            //cells.push('<div' + (highlight ? ' class="highlight"' : '') + '>' + v[dataProp] + '</div>');

                    //            var highlightClass = '';

                    //            if (col.highlightCells) {
                    //                highlightClass = 'highlight';

                    //                if (!v.Strokes) {
                    //                    highlightClass += ' faded';
                    //                }
                    //            }

                    //            cells.push([
                    //                '<div class="cell">',
                    //                    '<div class="cell-inner' + (highlightClass ? ' ' + highlightClass : '') + '">' + (v[dataProp] || '&nbsp;') + '</div>',
                    //                '</div>'
                    //            ].join(''));

                    //            sum += v[dataProp];
                    //        });

                    //        if (showSum) {
                    //            renderSum(sum);
                    //        }
                    //    };

                    //    var renderSum = function (sum, isTotal, forceShow) {
                    //        cells.push([
                    //            '<div class="cell sum' + (isTotal ? ' total' : '') + '">',
                    //                '<div class="cell-inner">' + (!sum || (!showSums && !forceShow) ? '&nbsp;' : sum) + '</div>', // If we have no value to show, or if we shouldn't show sums for this property, we show an empty cell instead
                    //            '</div>'
                    //        ].join(''));
                    //    };

                    //    if (splitCells) {
                    //        var splitIndex = holes.length / 2;
                    //        var front = holes.slice(0, splitIndex);
                    //        var back = holes.slice(splitIndex);

                    //        renderBlock(front, true);
                    //        renderBlock(back, true);
                    //    }
                    //    else {
                    //        renderBlock(holes);
                    //    }

                    //    var totalSum = '';
                    //    var forceShowTotal = false;

                    //    if (showSums) {
                    //        totalSum = 0;

                    //        $.each(holes, function (k, v) {
                    //            totalSum += v[dataProp];
                    //        });

                    //        totals[dataProp] = totalSum;
                    //    }
                    //    //else if (dataProp === 'Number') {
                    //    //    totalSum = 'Resultat'; // Not the prettiest solution. We want this text to stretch across cell 1 and 2 in the total row in mobile view
                    //    //    forceShowTotal = true; // Show this sum regardless of what the showSums value says
                    //    //}

                    //    //renderSum(totalSum, true, forceShowTotal);

                    //    scorecardRows.push([
                    //        '<div class="scorecard-row' + (className ? ' ' + className : '') + '">',
                    //            cells.join(''),
                    //        '</div>'
                    //    ].join(''));
                    //};

                    //$.each(scorecardColumns, function (k, v) {
                    //    //addRow(v.dataProp, v.className, v.showSums);
                    //    renderColumn(v);
                    //});

                    //scorecardHTML.push('<div class="scorecard-rows">' + scorecardRows.join('') + '</div>');

                    ////scorecardHTML.push('<div class="scorecard-totals">');
                    ////scorecardHTML.push('<div><span>Resultat</span><span>18 hål</span></div>');

                    ////scorecardHTML.push('<div><span>Just. Netto</span><span>72</span>');
                    ////scorecardHTML.push('<div><span>Poäng</span><span>' + totals['Points'] + '</span></div>');

                    ////scorecardHTML.push('</div>');

                    //var scorecardTotals = [];
                    ////var renderTotal = function (title, value, className, boldTitle) {
                    ////    scorecardTotals.push([
                    ////        '<div class="scorecard-total' + (className ? ' ' + className : '') + '">',
                    ////            '<span' + (boldTitle ? ' class="bold"' : '') + '>' + title + '</span>',
                    ////            '<span' + (!boldTitle ? ' class="bold"' : '') + '>' + value + '</span>',
                    ////        '</div>'
                    ////    ].join(''));
                    ////};

                    //var renderTotal = function (title, value, className, boldTitle) {
                    //    return [
                    //        '<div class="scorecard-total' + (className ? ' ' + className : '') + '">',
                    //            '<span' + (boldTitle ? ' class="bold"' : '') + '>' + title + '</span>',
                    //            value ? ('<span' + (!boldTitle ? ' class="bold"' : '') + '>' + value + '</span>') : '',
                    //        '</div>'
                    //    ].join('');
                    //};

                    //var playedHolesTitle = 'Resultat';
                    //var playedHolesTitleBold = true;

                    //if (item.PlayedHoles < 18) {
                    //    //scorecardTotals.push('<div class="scorecard-total-row bold">Handicap genererande resultat</div>');

                    //    scorecardTotals.push([
                    //        '<div class="scorecard-total-row">',
                    //            renderTotal('Handicap genererande resultat', '', '', true),
                    //        '</div>'
                    //    ].join(''));

                    //    playedHolesTitle = 'Spelade hål';
                    //    playedHolesTitleBold = false;
                    //}

                    //var scorecardTotalRow = [];
                    
                    //scorecardTotalRow.push(renderTotal(playedHolesTitle, item.PlayedHoles + ' hål', 'played-holes', playedHolesTitleBold));
                    //scorecardTotalRow.push(renderTotal('Just. Netto', totals['AdjustedBrutto'], 'adjusted-netto')); // TODO - Maybe just use the pre-calculated value from item
                    //totals['Points'] && scorecardTotalRow.push(renderTotal('Poäng', totals['Points'], 'points')); // TODO - Maybe just use the pre-calculated value from item

                    //scorecardTotals.push('<div class="scorecard-total-row">' + scorecardTotalRow.join('') + '</div>');

                    ////scorecardHTML.push('<div class="scorecard-totals">' + scorecardTotals.join('') + '</div>');

                    //$item.append([
                    //    '<div class="scorecard-wrapper" style="display: none;">', // Start by not showing this. The .slideDown animation will remove this
                    //        '<div class="scorecard">',
                    //            scorecardHTML.join(''),
                    //        '</div>',
                    //        '<div class="scorecard-totals">',
                    //            scorecardTotals.join(''),
                    //        '</div>',
                    //    '</div>'
                    //].join(''));

                    $('.scorecard-wrapper', $item).slideDown(animationTime);
                    //$target.html('Dölj scorekort'); // TODO - Translation
                    //$target.html('Scorekort'); // TODO - Translation - TODO - We may not need this if we're not changing the text
                },
                showMore: function () {
                    var $chkShowOnlyCountingRounds = $('#chkShowOnlyCountingRounds');
                    if ($chkShowOnlyCountingRounds.prop('checked')) { // While the "Show only x best rounds" is toggled, the Show More button should just deselect this
                        $chkShowOnlyCountingRounds.prop('checked', false).trigger('change');
                        return;
                    }

                    var $showMoreWrapper = $('.show-more-wrapper', '.hcp-rounds-result');
                    var $spinnerHolder = $('.spinner-holder', $showMoreWrapper);
                    $('.btn-show-more', $showMoreWrapper).hide();
                    $spinnerHolder.toggleClass('show', true);

                    app.rounds.load(25, app.rounds.src ? app.rounds.src.DataOffset : 0, function () { // Load an additional 25 items
                        $spinnerHolder.toggleClass('show', false);
                    });
                },
                showHelpModal: function () {
                    $('#mg-hcp-rounds-help-modal').modal();
                }
            };

            app.showCapModal = function () {
                $('#mg-hcp-cap-modal').modal();
                //var html = [
                //    '<p>Höjningen av din exakta handicap har begränsats av cap-funktionen</p>',
                //    '<p>- Bara mjuk cap</p>',
                //    '<div>Nuvarende lägsta exakta handicap: 10,2</div>',
                //    '<div>Nuvarande mjuka cap: 13,2 - 15.1</div>',
                //    '<div>Nuvarande hård cap: 15,1</div>',
                //    '<br />',
                //    '<div>Du kan läsa mer om cap-funktionen här.</div>',
                //    '<div>Har du frågor? Kontakta handicapasvarig på din hemmaklubb</div>'
                //].join('');

                //mg.ui.actionmodal({
                //    title: 'Cap',
                //    titleInHeader: true,
                //    html: html,
                //    hideStateIcon: true,
                //    hideFooter: true,
                //    modalBodyFull: true
                //});
                ////this.modal = _.ui.actionmodal({
                ////    title: _.translations.RegisterHCP,
                ////    titleInHeader: true,
                ////    html: html,
                ////    hideStateIcon: true,
                ////    hideFooter: true,
                ////    modalBodyFull: true,
                ////    className: 'hcp-select-round'
                ////});
            };

            app.showHCPAdjustedModal = function () {
                $('#hcp-hcp-adjusted-modal').modal();
            };

            app.showAdjustmentModal = function (adjustments) {
                if (!adjustments || adjustments.length === 0)
                    return;

                var html = [
                    '<div class="adjustment-modal-spinner-wrapper d-flex justify-content-center">',
                        '<div class="spinner spinner-blue"></div>',
                    '</div>',
                    '<div class="adjustment-modal-result d-none"></div>',
                ].join('');

                mg.ui.actionmodal({
                    title: 'Justering',
                    titleInHeader: true,
                    html: html,
                    className: 'adjustment-modal',
                    hideStateIcon: true,
                    hideFooter: true,
                    modalBodyFull: true
                });

                var adjustmentIDs = [];

                $.each(adjustments, function (k, v) {
                    adjustmentIDs.push(v.ID);
                });

                mg.ajax.post('?handler=Adjustments', { adjustmentIDs: adjustmentIDs }).done(function (data) {
                    $('.adjustment-modal-spinner-wrapper').remove();
                    var adjustmentsHTML = [];

                    data && $.each(data, function (k, v) {
                        var adjustment = adjustments.length >= data.length ? adjustments[k] : null; // TODO - If we don't get the adjustment value from the API, we need to find this by ID instead, but this should work for now

                        adjustment && adjustmentsHTML.push([
                            '<div class="adjustment-item">',
                                '<b>' + adjustment.Text + '</b>',
                                '<div>Kommentar: ' + (v.Note || '-') + '</div>',
                            '</div>'
                        ].join(''));
                    });

                    var html = [
                        '<div>' + 'Handicapresultatet p&#xE5;verkas av f&#xF6;ljande %adjustments%'.replace('%adjustments%', (adjustments.length > 1 ? 'Justeringar' : 'Justering').toLowerCase()) + ':</div>',
                        adjustmentsHTML.join('')
                    ].join('');

                    $('.adjustment-modal-result').html(html).removeClass('d-none');
                });
            };

            app.showHelpModal = function () {
                $('#mg-hcp-help-modal').modal();
            };

            app.showUncalculatedRoundsModal = function () {
                mg.ui.infomodal({ title: 'Det finns en rond som inte hanterats korrekt av systemet.', html: '<div>Något gick fel med din senaste registrering.</div><div>Vi bearbetar den fortfarande. När det är klart syns den i rondlistan.</div>', className: 'uncalculated-rounds-modal', wide: true });
            }

            app.openHcpCert = function() {
                if (mg.isMobile.any) {
                    window.open('/Site/HCP?Handler=Certificate');
                } else {
                    $('#hcpCertModal').modal('show');
                }
            };

            app.printHcpCert = function() {
                window.open('/Site/HCP/PrintHcpCert');
            };

            app.showWarning = function (text, onClick) {
                var $warningBlock = $('.warning-block', '.site-hcp-2');
                $warningBlock.find('span').html(text).end().removeClass('d-none').off('click').on('click', function () {
                    $.isFunction(onClick) && onClick();
                }).toggleClass('clickable', onClick ? true : false);
            };

            app.init = function () {
                app.hcpDevelopment.src = hcpDevelopment;
                app.hcpDevelopment.init();

                //$('.timeframe-item[data-value]').off('click').on('click', function () {
                //    app.hcpDevelopment.onTimeframeBtnClick(this);
                //});

                $('#hcp-tabs').on('show.bs.tab', function (e) {
                    var identifier = $(e.target).attr('data-identifier');

                    if (identifier === 'rounds') {
                        app.rounds.init();
                    }
                });

                //$('.nav-link').last().trigger('click'); // TODO - Remove this when we no longer need the Rounds tab opened first
                if ('0' === '1') { // KJ 2020-03-04 - This is not used while the Development tab is not in use
                    $(window).on('scroll', function (e) {
                        //console.log(e);
                        var developmentTabActive = $('.nav-link[data-identifier="development"]').hasClass('active');
                        var scroll = window.scrollY;
                        var $timeframeSelectors = $('.timeframe-selectors');
                        var $wrapper = $('.timeframe-selector-wrapper', '.site-hcp-2');
                        var wrapperOffset = $wrapper.offset().top;
                        var $header = $('#header');
                        var $headerInner = $('.header-section > .container', $header);
                        var $timeframeSelectorsSticky = $('.timeframe-selector-wrapper.sticky');
                        //var tabOffset = $timeframeSelectors.offsetParent()[0].offsetTop;
                        //var tabOffset = $timeframeSelectors.offsetParent().offset().top;

                        //console.log(scroll, tabOffset);
                        //console.log(scroll, wrapperOffset, $timeframeSelectorsSticky.length > 0 ? $timeframeSelectorsSticky.offset().top : undefined);
                        var comparisonValue = scroll;

                        if ($timeframeSelectorsSticky.length > 0) {
                            comparisonValue = $timeframeSelectorsSticky.offset().top;
                        }

                        if (developmentTabActive && comparisonValue >= wrapperOffset) {
                            if ($timeframeSelectorsSticky.length == 0) {
                                // Attach to header. By placing this just underneath the header, it should stick to the top while the header is not shown, and follow the header when the header slides into view
                                var wrapperClone = $wrapper.clone();
                                wrapperClone.addClass('sticky').find('.dropdown-menu').remove().end().appendTo($headerInner);
                                $header.addClass('header-has-attached-content');
                            }
                        }
                        else if ($timeframeSelectorsSticky.length > 0) {
                            // De-attach from header
                            //console.log('de-attaching', scroll, comparisonValue);
                            $timeframeSelectorsSticky.remove();
                            $header.removeClass('header-has-attached-content');
                        }

                        //if (scroll >= wrapperOffset) {
                        //    $timeframeSelectors.addClass('sticky');
                        //}
                        //else {
                        //    $timeframeSelectors.removeClass('sticky');
                        //}

                        //var value1 = scroll;

                        //var $header = $('#header');

                        //if (!$header.hasClass('header-moved-up')) { // If the header has this class, it means it is out of view
                        //    value1 += $('.header-bar', $header).height();
                        //}

                        //var value2 = tabOffset + 16; // TODO - Calculate the 16 (50px padding minus own height, perhaps)

                        ////$timeframeSelectors.css('top', (Math.max(value1, value2)) - tabOffset);
                        //$timeframeSelectors.addClass('sticky');
                    });
                }
                else {
                    app.rounds.init();
                }

                //$(document).on('click', function (e) {
                //    var $target = $(e.target);
                //    var $openDropdowns = $('.dropdown-menu.show');

                //    console.log($target);

                //    if ($openDropdowns.length > 0 && $target.parents('.dropdown-menu').length === 0) {
                //        console.log('closing dropdown-menu');
                //        $openDropdowns.removeClass('show');
                //    }
                //})

                $(document).on('click', '.flatpickr-calendar.open', function (e) {
                    e.stopPropagation();
                });

                $('.ads-wrapper a', '.site-hcp-2').on('click', function (e) {
                    var $target = $(e.target);

                    if (!$target.hasClass('ad-box'))
                        $target = $target.parents('.ad-box');

                    var href = '';
                    var external = false;

                    switch ($target.attr('data-page')) {
                        case 'hcprules':
                            href = 'https://golf.se/regler-och-handicap/';
                            external = true;
                            break;
                        case 'whsinfo':
                            href = 'https://golf.se/for-spelaren/regler--handicap/varldshandicapsystemet/';
                            external = true;
                            break;
                    }

                    if (href) {
                        if (external)
                            mg.openTab(href);
                        else
                            mg.redirect('/Site/HCP/' + href);
                    }
                });

                var $hcpCertModal = $('#hcpCertModal');

                $hcpCertModal.on('shown.bs.modal', function(e) {
                    var img = '<img src="/Site/Hcp?Handler=Certificate" class="img-fluid">';

                    !$hcpCertModal.data('hcpcertloaded') && $(img).on('load', function() {
                        $('.modal-body', $hcpCertModal).empty().append($(this));
                        $('.modal-footer button.hide', $hcpCertModal).removeClass('hide');

                        $hcpCertModal.data('hcpcertloaded', true);
                    });
                });

            };

            app.init();
        })(jQuery, window.mg.pages.hcp2 || (window.mg.pages.hcp2 = {}), window);
    </script>

    <script type="text/javascript">
    mg.ui.header.init('#header');
    </script>

        <script type="text/javascript">
        (function() {
            var timeout      = 30;
            var isPersistent = true;
            var count        = 0;

            var logoutCountDown = mg.countDown(timeout * 60, function(left) {
                $('a[data-timeout]', '#header')[0].setAttribute('data-timeout', left);

                if (++count % 60 === 0)
                    mg.ping();
            }, function() {
                if (isPersistent) {
                    logoutCountDown.reset();
                } else {
                    mg.logout();
                }
            });

            var resetTimer = function() {
                logoutCountDown.resetTimer();
            };

            this.addEventListener('mousemove', resetTimer, false);
            this.addEventListener('mousedown', resetTimer, false);
            this.addEventListener('keypress', resetTimer, false);
            this.addEventListener('DOMMouseScroll', resetTimer, false);
            this.addEventListener('mousewheel', resetTimer, false);
            this.addEventListener('touchmove', resetTimer, false);
            this.addEventListener('MSPointerMove', resetTimer, false);

            logoutCountDown.start();
        })();
        </script>

    <script type="text/javascript">
    mg.ui.navigation.init('#navigation', '#header');
    </script>

    
    <script async src="https://lilum.lightsinline.se/lilum-1.3.js"></script>
</body>
</html>
